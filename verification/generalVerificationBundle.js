(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.GeneralVerificator = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){

},{}],2:[function(require,module,exports){
"use strict";module.exports=function e(r){return null===r||"object"!=typeof r||null!=r.toJSON?JSON.stringify(r):Array.isArray(r)?"["+r.reduce((r,t,o)=>{return r+(0===o?"":",")+e(void 0===t||"symbol"==typeof t?null:t)},"")+"]":"{"+Object.keys(r).sort().reduce((t,o,u)=>{if(void 0===r[o]||"symbol"==typeof r[o])return t;return t+(0===t.length?"":",")+e(o)+":"+e(r[o])},"")+"}"};

},{}],3:[function(require,module,exports){
"use strict";const{isArray:_isArray,isObject:_isObject,isString:_isString}=require("./types"),{asArray:_asArray}=require("./util"),{prependBase:prependBase}=require("./url"),JsonLdError=require("./JsonLdError"),ResolvedContext=require("./ResolvedContext"),MAX_CONTEXT_URLS=10;function _throwInvalidLocalContext(e){throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function _resolveContextUrls({context:e,base:t}){if(!e)return;const o=e["@context"];if(_isString(o))e["@context"]=prependBase(t,o);else if(_isArray(o))for(let e=0;e<o.length;++e){const r=o[e];_isString(r)?o[e]=prependBase(t,r):_isObject(r)&&_resolveContextUrls({context:{"@context":r},base:t})}else if(_isObject(o))for(const e in o)_resolveContextUrls({context:o[e],base:t})}module.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:o,base:r,cycles:n=new Set}){t&&_isObject(t)&&t["@context"]&&(t=t["@context"]),t=_asArray(t);const s=[];for(const c of t){if(_isString(c)){let t=this._get(c);t||(t=await this._resolveRemoteContext({activeCtx:e,url:c,documentLoader:o,base:r,cycles:n})),_isArray(t)?s.push(...t):s.push(t);continue}if(null===c){s.push(new ResolvedContext({document:null}));continue}_isObject(c)||_throwInvalidLocalContext(t);const a=JSON.stringify(c);let i=this._get(a);i||(i=new ResolvedContext({document:c}),this._cacheResolvedContext({key:a,resolved:i,tag:"static"})),s.push(i)}return s}_get(e){let t=this.perOpCache.get(e);if(!t){const o=this.sharedCache.get(e);o&&(t=o.get("static"))&&this.perOpCache.set(e,t)}return t}_cacheResolvedContext({key:e,resolved:t,tag:o}){if(this.perOpCache.set(e,t),void 0!==o){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(o,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:o,base:r,cycles:n}){t=prependBase(r,t);const{context:s,remoteDoc:c}=await this._fetchContext({activeCtx:e,url:t,documentLoader:o,cycles:n});_resolveContextUrls({context:s,base:r=c.documentUrl||t});const a=await this.resolve({activeCtx:e,context:s,documentLoader:o,base:r,cycles:n});return this._cacheResolvedContext({key:t,resolved:a,tag:c.tag}),a}async _fetchContext({activeCtx:e,url:t,documentLoader:o,cycles:r}){if(r.size>10)throw new JsonLdError("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(r.has(t))throw new JsonLdError("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let n,s;r.add(t);try{n=(s=await o(t)).document||null,_isString(n)&&(n=JSON.parse(n))}catch(e){throw new JsonLdError("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!_isObject(n))throw new JsonLdError("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return n="@context"in n?{"@context":n["@context"]}:{"@context":{}},s.contextUrl&&(_isArray(n["@context"])||(n["@context"]=[n["@context"]]),n["@context"].push(s.contextUrl)),{context:n,remoteDoc:s}}};

},{"./JsonLdError":4,"./ResolvedContext":9,"./types":23,"./url":24,"./util":25}],4:[function(require,module,exports){
"use strict";module.exports=class extends Error{constructor(r="An unspecified JSON-LD error occurred.",s="jsonld.Error",e={}){super(r),this.name=s,this.message=r,this.details=e}};

},{}],5:[function(require,module,exports){
"use strict";module.exports=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t});

},{}],6:[function(require,module,exports){
"use strict";module.exports=require("rdf-canonize").NQuads;

},{"rdf-canonize":44}],7:[function(require,module,exports){
"use strict";const{RDF_LANGSTRING:RDF_LANGSTRING,RDF_PLAIN_LITERAL:RDF_PLAIN_LITERAL,RDF_OBJECT:RDF_OBJECT,RDF_XML_LITERAL:RDF_XML_LITERAL,XSD_STRING:XSD_STRING}=require("./constants");let _Node;function getXMLSerializerClass(){return"undefined"==typeof XMLSerializer?require("xmldom").XMLSerializer:XMLSerializer}_Node="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},module.exports=class{parse(e){const t={"@default":[]},N=e.getSubjects();for(let l=0;l<N.length;++l){const _=N[l];if(null===_)continue;const n=e.getSubjectTriples(_);if(null===n)continue;const E=n.predicates;for(const e in E){const N=E[e].objects;for(let l=0;l<N.length;++l){const n=N[l],E={};0===_.indexOf("_:")?E.subject={type:"blank node",value:_}:E.subject={type:"IRI",value:_},0===e.indexOf("_:")?E.predicate={type:"blank node",value:e}:E.predicate={type:"IRI",value:e};let a=n.value;if(n.type===RDF_XML_LITERAL){const e=new(getXMLSerializerClass());a="";for(let t=0;t<n.value.length;t++)n.value[t].nodeType===_Node.ELEMENT_NODE?a+=e.serializeToString(n.value[t]):n.value[t].nodeType===_Node.TEXT_NODE&&(a+=n.value[t].nodeValue)}E.object={},n.type===RDF_OBJECT?0===n.value.indexOf("_:")?E.object.type="blank node":E.object.type="IRI":(E.object.type="literal",n.type===RDF_PLAIN_LITERAL?n.language?(E.object.datatype=RDF_LANGSTRING,E.object.language=n.language):E.object.datatype=XSD_STRING:E.object.datatype=n.type),E.object.value=a,t["@default"].push(E)}}}return t}};

},{"./constants":11,"xmldom":1}],8:[function(require,module,exports){
"use strict";module.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}};

},{}],9:[function(require,module,exports){
"use strict";const LRU=require("lru-cache"),MAX_ACTIVE_CONTEXTS=10;module.exports=class{constructor({document:e}){this.document=e,this.cache=new LRU({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,c){this.cache.set(e,c)}};

},{"lru-cache":26}],10:[function(require,module,exports){
"use strict";const JsonLdError=require("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=require("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference}=require("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=require("./context"),{removeBase:_removeBase,prependBase:_prependBase}=require("./url"),{addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=require("./util"),api={};function _selectTerm(e,i,t,a,n,r){null===r&&(r="@null");const o=[];if(("@id"===r||"@reverse"===r)&&_isObject(t)&&"@id"in t){"@reverse"===r&&o.push("@reverse");const i=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:!0}});e.mappings.has(i)&&e.mappings.get(i)&&e.mappings.get(i)["@id"]===t["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(r);const e=o.find(e=>e.includes("_"));e&&o.push(e.replace(/^[^_]+_/,"_"))}o.push("@none");const s=e.inverse[i];for(const e of a){if(!(e in s))continue;const i=s[e][n];for(const e of o)if(e in i)return i[e]}return null}function _checkNestProperty(e,i,t){if("@nest"!==_expandIri(e,i,{vocab:!0},t))throw new JsonLdError("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}module.exports=api,api.compact=(async({activeCtx:e,activeProperty:i=null,element:t,options:a={},compactionMap:n=(()=>void 0)})=>{if(_isArray(t)){let r=[];for(let o=0;o<t.length;++o){let s=await api.compact({activeCtx:e,activeProperty:i,element:t[o],options:a,compactionMap:n});null===s&&void 0===(s=await n({unmappedValue:t[o],activeCtx:e,activeProperty:i,parent:t,index:o,options:a}))||r.push(s)}if(a.compactArrays&&1===r.length){0===(_getContextValue(e,i,"@container")||[]).length&&(r=r[0])}return r}const r=_getContextValue(e,i,"@context");if(_isUndefined(r)||(e=await _processContext({activeCtx:e,localCtx:r,propagate:!0,overrideProtected:!0,options:a})),_isObject(t)){if(a.link&&"@id"in t&&a.link.hasOwnProperty(t["@id"])){const e=a.link[t["@id"]];for(let i=0;i<e.length;++i)if(e[i].expanded===t)return e[i].compacted}if(_isValue(t)||_isSubjectReference(t)){const n=api.compactValue({activeCtx:e,activeProperty:i,value:t,options:a});return a.link&&_isSubjectReference(t)&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:n})),n}if(_isList(t)){if((_getContextValue(e,i,"@container")||[]).includes("@list"))return api.compact({activeCtx:e,activeProperty:i,element:t["@list"],options:a,compactionMap:n})}const r="@reverse"===i,o={},s=e;_isValue(t)||_isSubjectReference(t)||(e=e.revertToPreviousContext());const c=_getContextValue(s,i,"@context");_isUndefined(c)||(e=await _processContext({activeCtx:e,localCtx:c,propagate:!0,overrideProtected:!0,options:a})),a.link&&"@id"in t&&(a.link.hasOwnProperty(t["@id"])||(a.link[t["@id"]]=[]),a.link[t["@id"]].push({expanded:t,compacted:o}));let l=t["@type"]||[];l.length>1&&(l=Array.from(l).sort());const p=e;for(const i of l){const t=api.compactIri({activeCtx:p,iri:i,relativeTo:{vocab:!0}}),n=_getContextValue(s,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}const d=Object.keys(t).sort();for(const c of d){const l=t[c];if("@id"!==c)if("@type"!==c)if("@reverse"!==c)if("@preserve"!==c)if("@index"!==c)if("@graph"!==c&&"@list"!==c&&"@included"!==c&&_isKeyword(c)){const i=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,i,l)}else{if(!_isArray(l))throw new JsonLdError("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===l.length){const i=api.compactIri({activeCtx:e,iri:c,value:l,relativeTo:{vocab:!0},reverse:r}),t=e.mappings.has(i)?e.mappings.get(i)["@nest"]:null;let n=o;t&&(_checkNestProperty(e,t,a),_isObject(o[t])||(o[t]={}),n=o[t]),_addValue(n,i,l,{propertyIsArray:!0})}for(const i of l){const t=api.compactIri({activeCtx:e,iri:c,value:i,relativeTo:{vocab:!0},reverse:r}),s=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let l=o;s&&(_checkNestProperty(e,s,a),_isObject(o[s])||(o[s]={}),l=o[s]);const p=_getContextValue(e,t,"@container")||[],d=_isGraph(i),u=_isList(i);let v;u?v=i["@list"]:d&&(v=i["@graph"]);let g=await api.compact({activeCtx:e,activeProperty:t,element:u||d?v:i,options:a,compactionMap:n});if(u){if(_isArray(g)||(g=[g]),p.includes("@list")){_addValue(l,t,g,{valueIsArray:!0,allowDuplicate:!0});continue}g={[api.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:g},"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"])}if(d)if(p.includes("@graph")&&(p.includes("@id")||p.includes("@index")&&_isSimpleGraph(i))){let n;l.hasOwnProperty(t)?n=l[t]:l[t]=n={};const r=(p.includes("@id")?i["@id"]:i["@index"])||api.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});_addValue(n,r,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})}else p.includes("@graph")&&_isSimpleGraph(i)?(_isArray(g)&&g.length>1&&(g={"@included":g}),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")})):(_isArray(g)&&1===g.length&&a.compactArrays&&(g=g[0]),g={[api.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:g},"@id"in i&&(g[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i["@id"]),"@index"in i&&(g[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=i["@index"]),_addValue(l,t,g,{propertyIsArray:!a.compactArrays||p.includes("@set")}));else if(p.includes("@language")||p.includes("@index")||p.includes("@id")||p.includes("@type")){let r,o;if(l.hasOwnProperty(t)?r=l[t]:l[t]=r={},p.includes("@language"))_isValue(g)&&(g=g["@value"]),o=i["@language"];else if(p.includes("@index")){const a=_getContextValue(e,t,"@index")||"@index",n=api.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});if("@index"===a)o=i["@index"],delete g[n];else{let e;if([o,...e]=_asArray(g[a]||[]),_isString(o))switch(e.length){case 0:delete g[a];break;case 1:g[a]=e[0];break;default:g[a]=e}else o=null}}else if(p.includes("@id")){const i=api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=g[i],delete g[i]}else if(p.includes("@type")){const r=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let s;switch([o,...s]=_asArray(g[r]||[]),s.length){case 0:delete g[r];break;case 1:g[r]=s[0];break;default:g[r]=s}1===Object.keys(g).length&&"@id"in i&&(g=await api.compact({activeCtx:e,activeProperty:t,element:{"@id":i["@id"]},options:a,compactionMap:n}))}o||(o=api.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),_addValue(r,o,g,{propertyIsArray:p.includes("@set")})}else{const e=!a.compactArrays||p.includes("@set")||p.includes("@list")||_isArray(g)&&0===g.length||"@list"===c||"@graph"===c;_addValue(l,t,g,{propertyIsArray:e})}}}else{if((_getContextValue(e,i,"@container")||[]).includes("@index"))continue;const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,l)}else{const t=await api.compact({activeCtx:e,activeProperty:i,element:l,options:a,compactionMap:n});_isArray(t)&&0===t.length||_addValue(o,c,t)}else{const i=await api.compact({activeCtx:e,activeProperty:"@reverse",element:l,options:a,compactionMap:n});for(const t in i)if(e.mappings.has(t)&&e.mappings.get(t).reverse){const n=i[t],r=(_getContextValue(e,t,"@container")||[]).includes("@set")||!a.compactArrays;_addValue(o,t,n,{propertyIsArray:r}),delete i[t]}if(Object.keys(i).length>0){const t=api.compactIri({activeCtx:e,iri:c,relativeTo:{vocab:!0}});_addValue(o,t,i)}}else{let i=_asArray(l).map(e=>api.compactIri({activeCtx:s,iri:e,relativeTo:{vocab:!0}}));1===i.length&&(i=i[0]);const t=api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),a=(_getContextValue(e,t,"@container")||[]).includes("@set")&&_processingMode(e,1.1)||_isArray(i)&&0===l.length;_addValue(o,t,i,{propertyIsArray:a})}else{let i=_asArray(l).map(i=>api.compactIri({activeCtx:e,iri:i,relativeTo:{vocab:!1},base:a.base}));1===i.length&&(i=i[0]),o[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=i}}return o}return t}),api.compactIri=(({activeCtx:e,iri:i,value:t=null,relativeTo:a={vocab:!1},reverse:n=!1,base:r=null})=>{if(null===i)return i;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const o=e.getInverse();if(_isKeyword(i)&&i in o&&"@none"in o[i]&&"@type"in o[i]["@none"]&&"@none"in o[i]["@none"]["@type"])return o[i]["@none"]["@type"]["@none"];if(a.vocab&&i in o){const a=e["@language"]||"@none",r=[];_isObject(t)&&"@index"in t&&!("@graph"in t)&&r.push("@index","@index@set"),_isObject(t)&&"@preserve"in t&&(t=t["@preserve"][0]),_isGraph(t)?("@index"in t&&r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t&&r.push("@graph@id","@graph@id@set"),r.push("@graph","@graph@set","@set"),"@index"in t||r.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in t||r.push("@graph@id","@graph@id@set")):_isObject(t)&&!_isValue(t)&&r.push("@id","@id@set","@type","@set@type");let o="@language",s="@null";if(n)o="@type",s="@reverse",r.push("@set");else if(_isList(t)){"@index"in t||r.push("@list");const e=t["@list"];if(0===e.length)o="@any",s="@none";else{let i=0===e.length?a:null,t=null;for(let a=0;a<e.length;++a){const n=e[a];let r="@none",o="@none";if(_isValue(n))if("@direction"in n){r=`${(n["@language"]||"").toLowerCase()}_${n["@direction"]}`}else"@language"in n?r=n["@language"].toLowerCase():"@type"in n?o=n["@type"]:r="@null";else o="@id";if(null===i?i=r:r!==i&&_isValue(n)&&(i="@none"),null===t?t=o:o!==t&&(t="@none"),"@none"===i&&"@none"===t)break}i=i||"@none","@none"!==(t=t||"@none")?(o="@type",s=t):s=i}}else{if(_isValue(t))if("@language"in t&&!("@index"in t)){r.push("@language","@language@set"),s=t["@language"];const e=t["@direction"];e&&(s=`${s}_${e}`)}else"@direction"in t&&!("@index"in t)?s=`_${t["@direction"]}`:"@type"in t&&(o="@type",s=t["@type"]);else o="@type",s="@id";r.push("@set")}r.push("@none"),!_isObject(t)||"@index"in t||r.push("@index","@index@set"),_isValue(t)&&1===Object.keys(t).length&&r.push("@language","@language@set");const c=_selectTerm(e,i,t,r,o,s);if(null!==c)return c}if(a.vocab&&"@vocab"in e){const t=e["@vocab"];if(0===i.indexOf(t)&&i!==t){const a=i.substr(t.length);if(!e.mappings.has(a))return a}}let s=null;const c=[];let l=e.fastCurieMap;const p=i.length-1;for(let e=0;e<p&&i[e]in l;++e)""in(l=l[i[e]])&&c.push(l[""][0]);for(let a=c.length-1;a>=0;--a){const n=c[a],r=n.terms;for(const a of r){const r=a+":"+i.substr(n.iri.length);e.mappings.get(a)._prefix&&(!e.mappings.has(r)||null===t&&e.mappings.get(r)["@id"]===i)&&(null===s||_compareShortestLeast(r,s)<0)&&(s=r)}}if(null!==s)return s;for(const[t,a]of e.mappings)if(a&&a._prefix&&i.startsWith(t+":"))throw new JsonLdError(`Absolute IRI "${i}" confused with prefix "${t}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return a.vocab?i:"@base"in e?e["@base"]?_removeBase(_prependBase(r,e["@base"]),i):i:_removeBase(r,i)}),api.compactValue=(({activeCtx:e,activeProperty:i,value:t,options:a})=>{if(_isValue(t)){const a=_getContextValue(e,i,"@type"),n=_getContextValue(e,i,"@language"),r=_getContextValue(e,i,"@direction"),o=_getContextValue(e,i,"@container")||[],s="@index"in t&&!o.includes("@index");if(!s&&"@none"!==a){if(t["@type"]===a)return t["@value"];if("@language"in t&&t["@language"]===n&&"@direction"in t&&t["@direction"]===r)return t["@value"];if("@language"in t&&t["@language"]===n)return t["@value"];if("@direction"in t&&t["@direction"]===r)return t["@value"]}const c=Object.keys(t).length,l=1===c||2===c&&"@index"in t&&!s,p="@language"in e,d=_isString(t["@value"]),u=e.mappings.has(i)&&null===e.mappings.get(i)["@language"];if(l&&"@none"!==a&&(!p||!d||u))return t["@value"];const v={};return s&&(v[api.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),"@type"in t?v[api.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:e,iri:t["@type"],relativeTo:{vocab:!0}}):"@language"in t&&(v[api.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=t["@language"]),"@direction"in t&&(v[api.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=t["@direction"]),v[api.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=t["@value"],v}const n=_expandIri(e,i,{vocab:!0},a),r=_getContextValue(e,i,"@type"),o=api.compactIri({activeCtx:e,iri:t["@id"],relativeTo:{vocab:"@vocab"===r},base:a.base});return"@id"===r||"@vocab"===r||"@graph"===n?o:{[api.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:o}});

},{"./JsonLdError":4,"./context":12,"./graphTypes":19,"./types":23,"./url":24,"./util":25}],11:[function(require,module,exports){
"use strict";const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";module.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD:XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"};

},{}],12:[function(require,module,exports){
"use strict";const util=require("./util"),JsonLdError=require("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isString:_isString,isUndefined:_isUndefined}=require("./types"),{isAbsolute:_isAbsoluteIri,isRelative:_isRelativeIri,prependBase:prependBase,parse:parseUrl}=require("./url"),{asArray:_asArray,compareShortestLeast:_compareShortestLeast}=require("./util"),INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,KEYWORD_PATTERN=/^@[a-zA-Z]+$/,api={};function _expandIri(e,n,t,o,r,i){if(null===n||!_isString(n)||api.isKeyword(n))return n;if(n.match(KEYWORD_PATTERN))return null;if(o&&o.hasOwnProperty(n)&&!0!==r.get(n)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:n,defined:r,options:i}),(t=t||{}).vocab){const t=e.mappings.get(n);if(null===t)return null;if(_isObject(t)&&"@id"in t)return t["@id"]}const s=n.indexOf(":");if(s>0){const t=n.substr(0,s),a=n.substr(s+1);if("_"===t||0===a.indexOf("//"))return n;o&&o.hasOwnProperty(t)&&api.createTermDefinition({activeCtx:e,localCtx:o,term:t,defined:r,options:i});const d=e.mappings.get(t);if(d&&d._prefix)return d["@id"]+a;if(_isAbsoluteIri(n))return n}if(t.vocab&&"@vocab"in e)return e["@vocab"]+n;if(t.base&&"@base"in e){if(e["@base"])return prependBase(prependBase(i.base,e["@base"]),n)}else if(t.base)return prependBase(i.base,n);return n}function _deepCompare(e,n){if(!e||"object"!=typeof e||!n||"object"!=typeof n)return e===n;const t=Array.isArray(e);if(t!==Array.isArray(n))return!1;if(t){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!_deepCompare(e[t],n[t]))return!1;return!0}const o=Object.keys(e),r=Object.keys(n);if(o.length!==r.length)return!1;for(const t in e){let o=e[t],r=n[t];if("@container"===t&&Array.isArray(o)&&Array.isArray(r)&&(o=o.slice().sort(),r=r.slice().sort()),!_deepCompare(o,r))return!1}return!0}module.exports=api,api.process=(async({activeCtx:e,localCtx:n,options:t,propagate:o=!0,overrideProtected:r=!1,cycles:i=new Set})=>{if(_isObject(n)&&"@context"in n&&_isArray(n["@context"])&&(n=n["@context"]),0===_asArray(n).length)return e;const s=await t.contextResolver.resolve({activeCtx:e,context:n,documentLoader:t.documentLoader,base:t.base});_isObject(s[0].document)&&"boolean"==typeof s[0].document["@propagate"]&&(o=s[0].document["@propagate"]);let a=e;o||a.previousContext||((a=a.clone()).previousContext=e);for(const o of s){let{document:s}=o;if(e=a,null===s){if(!r&&0!==Object.keys(e.protected).length){const r=t&&t.protectedMode||"error";if("error"===r)throw new JsonLdError("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===r){console.warn("WARNING: invalid context nullification");const n=o.getProcessed(e);if(n){a=e=n;continue}const r=e;a=e=api.getInitialContext(t).clone();for(const[n,t]of Object.entries(r.protected))t&&(e.mappings[n]=util.clone(r.mappings[n]));e.protected=util.clone(r.protected),o.setProcessed(r,a);continue}throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,protectedMode:r})}a=e=api.getInitialContext(t).clone();continue}const d=o.getProcessed(e);if(d){a=e=d;continue}if(_isObject(s)&&"@context"in s&&(s=s["@context"]),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});a=a.clone();const c=new Map;if("@version"in s){if(1.1!==s["@version"])throw new JsonLdError("Unsupported JSON-LD version: "+s["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:s});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new JsonLdError("@version: "+s["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:s});a.processingMode="json-ld-1.1",a["@version"]=s["@version"],c.set("@version",!0)}if(a.processingMode=a.processingMode||e.processingMode,"@base"in s){let e=s["@base"];if(null===e||_isAbsoluteIri(e));else{if(!_isRelativeIri(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});e=prependBase(a["@base"],e)}a["@base"]=e,c.set("@base",!0)}if("@vocab"in s){const e=s["@vocab"];if(null===e)delete a["@vocab"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!_isAbsoluteIri(e)&&api.processingMode(a,1))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});a["@vocab"]=_expandIri(a,e,{vocab:!0,base:!0},void 0,void 0,t)}c.set("@vocab",!0)}if("@language"in s){const e=s["@language"];if(null===e)delete a["@language"];else{if(!_isString(e))throw new JsonLdError('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});a["@language"]=e.toLowerCase()}c.set("@language",!0)}if("@direction"in s){const n=s["@direction"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:s});if(null===n)delete a["@direction"];else{if("ltr"!==n&&"rtl"!==n)throw new JsonLdError('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:s});a["@direction"]=n}c.set("@direction",!0)}if("@propagate"in s){const t=s["@propagate"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if("boolean"!=typeof t)throw new JsonLdError("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:n});c.set("@propagate",!0)}if("@import"in s){const o=s["@import"];if("json-ld-1.0"===e.processingMode)throw new JsonLdError("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if(!_isString(o))throw new JsonLdError("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:n});const r=await t.contextResolver.resolve({activeCtx:e,context:o,documentLoader:t.documentLoader,base:t.base});if(1!==r.length)throw new JsonLdError("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:n});const i=r[0].getProcessed(e);if(i)s=i;else{const t=r[0].document;if("@import"in t)throw new JsonLdError("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:n});for(const e in t)s.hasOwnProperty(e)||(s[e]=t[e]);r[0].setProcessed(e,s)}c.set("@import",!0)}c.set("@protected",s["@protected"]||!1);for(const e in s)if(api.createTermDefinition({activeCtx:a,localCtx:s,term:e,defined:c,options:t,overrideProtected:r}),_isObject(s[e])&&"@context"in s[e]){const n=s[e]["@context"];let o=!0;if(_isString(n)){const e=prependBase(t.base,n);i.has(e)?o=!1:i.add(e)}if(o)try{await api.process({activeCtx:a.clone(),localCtx:s[e]["@context"],overrideProtected:!0,options:t,cycles:i})}catch(n){throw new JsonLdError("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:s[e]["@context"],term:e})}}o.setProcessed(e,a)}return a}),api.createTermDefinition=(({activeCtx:e,localCtx:n,term:t,defined:o,options:r,overrideProtected:i=!1})=>{if(o.has(t)){if(o.get(t))return;throw new JsonLdError("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:n,term:t})}let s;if(o.set(t,!1),n.hasOwnProperty(t)&&(s=n[t]),"@type"===t&&_isObject(s)&&"@set"===(s["@container"]||"@set")&&api.processingMode(e,1.1)){const e=["@container","@id","@protected"],o=Object.keys(s);if(0===o.length||o.some(n=>!e.includes(n)))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t})}else{if(api.isKeyword(t))throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:t});if(t.match(KEYWORD_PATTERN))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:t});if(""===t)throw new JsonLdError("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:n})}const a=e.mappings.get(t);e.mappings.has(t)&&e.mappings.delete(t);let d=!1;if((_isString(s)||null===s)&&(d=!0,s={"@id":s}),!_isObject(s))throw new JsonLdError("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:n});const c={};e.mappings.set(t,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];api.processingMode(e,1.1)&&l.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in s)if(!l.includes(e))throw new JsonLdError("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:n});const p=t.indexOf(":");if(c._termHasColon=p>0,"@reverse"in s){if("@id"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});if("@nest"in s)throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});const i=s["@reverse"];if(!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(!api.isKeyword(i)&&i.match(KEYWORD_PATTERN))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:i}),void(a?e.mappings.set(t,a):e.mappings.delete(t));const d=_expandIri(e,i,{vocab:!0,base:!1},n,o,r);if(!_isAbsoluteIri(d))throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});c["@id"]=d,c.reverse=!0}else if("@id"in s){let i=s["@id"];if(i&&!_isString(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(null===i)c["@id"]=null;else{if(!api.isKeyword(i)&&i.match(KEYWORD_PATTERN))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:i}),void(a?e.mappings.set(t,a):e.mappings.delete(t));if(i!==t){if(i=_expandIri(e,i,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(i)&&!api.isKeyword(i))throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(t.match(/(?::[^:])|\//)){if(_expandIri(e,t,{vocab:!0,base:!1},n,new Map(o).set(t,!0),r)!==i)throw new JsonLdError("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n})}c["@id"]=i,c._prefix=d&&!c._termHasColon&&i.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in c))if(c._termHasColon){const i=t.substr(0,p);if(n.hasOwnProperty(i)&&api.createTermDefinition({activeCtx:e,localCtx:n,term:i,defined:o,options:r}),e.mappings.has(i)){const n=t.substr(p+1);c["@id"]=e.mappings.get(i)["@id"]+n}else c["@id"]=t}else if("@type"===t)c["@id"]=t;else{if(!("@vocab"in e))throw new JsonLdError("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n,term:t});c["@id"]=e["@vocab"]+t}if((!0===s["@protected"]||!0===o.get("@protected")&&!1!==s["@protected"])&&(e.protected[t]=!0,c.protected=!0),o.set(t,!0),"@type"in s){let t=s["@type"];if(!_isString(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if("@json"===t||"@none"===t){if(api.processingMode(e,1))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must not be "+`"${t}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else if("@id"!==t&&"@vocab"!==t){if(t=_expandIri(e,t,{vocab:!0,base:!1},n,o,r),!_isAbsoluteIri(t))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if(0===t.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}c["@type"]=t}if("@container"in s){const t=_isString(s["@container"])?[s["@container"]]:s["@container"]||[],o=["@list","@set","@index","@language"];let r=!0;const i=t.includes("@set");if(api.processingMode(e,1.1)){if(o.push("@graph","@id","@type"),t.includes("@list")){if(1!==t.length)throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else if(t.includes("@graph")){if(t.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new JsonLdError("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else r&=t.length<=(i?2:1);if(t.includes("@type")&&(c["@type"]=c["@type"]||"@id",!["@id","@vocab"].includes(c["@type"])))throw new JsonLdError("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else r&=!_isArray(s["@container"]),r&=t.length<=1;if(r&=t.every(e=>o.includes(e)),!(r&=!(i&&t.includes("@list"))))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value must be one of the following: "+o.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:n});if(c.reverse&&!t.every(e=>["@index","@set"].includes(e)))throw new JsonLdError("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});c["@container"]=t}if("@index"in s){if(!("@container"in s&&c["@container"].includes("@index")))throw new JsonLdError("Invalid JSON-LD syntax; @index without @index in @container: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});if(!_isString(s["@index"])||0===s["@index"].indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @index must expand to an IRI: "+`"${s["@index"]}" on term "${t}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:n});c["@index"]=s["@index"]}if("@context"in s&&(c["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let e=s["@language"];if(null!==e&&!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:n});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in s){if(t.match(/:|\//))throw new JsonLdError("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:n});if(api.isKeyword(c["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:n});if("boolean"!=typeof s["@prefix"])throw new JsonLdError("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:n});c._prefix=!0===s["@prefix"]}if("@direction"in s){const e=s["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new JsonLdError('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:n});c["@direction"]=e}if("@nest"in s){const e=s["@nest"];if(!_isString(e)||"@nest"!==e&&0===e.indexOf("@"))throw new JsonLdError("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:n});c["@nest"]=e}const x=c["@id"];if("@context"===x||"@preserve"===x)throw new JsonLdError("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:n});if(a&&a.protected&&!i&&(e.protected[t]=!0,c.protected=!0,!_deepCompare(a,c))){const e=r&&r.protectedMode||"error";if("error"===e)throw new JsonLdError("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:n,term:t});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:t});throw new JsonLdError("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,term:t,protectedMode:e})}}),api.expandIri=((e,n,t,o)=>_expandIri(e,n,t,void 0,void 0,o)),api.getInitialContext=(e=>{const n=JSON.stringify({processingMode:e.processingMode}),t=INITIAL_CONTEXT_CACHE.get(n);if(t)return t;const o={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const n=e.inverse={},t=e.fastCurieMap={},o={},s=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],d=e.mappings,c=[...d.keys()].sort(_compareShortestLeast);for(const e of c){const r=d.get(e);if(null===r)continue;let c=r["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===r["@id"])continue;const l=_asArray(r["@id"]);for(const d of l){let l=n[d];const p=api.isKeyword(d);if(l)p||r._termHasColon||o[d].push(e);else if(n[d]=l={},!p&&!r._termHasColon){o[d]=[e];const n={iri:d,terms:o[d]};d[0]in t?t[d[0]].push(n):t[d[0]]=[n]}if(l[c]||(l[c]={"@language":{},"@type":{},"@any":{}}),l=l[c],i(e,l["@any"],"@none"),r.reverse)i(e,l["@type"],"@reverse");else if("@none"===r["@type"])i(e,l["@any"],"@none"),i(e,l["@language"],"@none"),i(e,l["@type"],"@none");else if("@type"in r)i(e,l["@type"],r["@type"]);else if("@language"in r&&"@direction"in r){const n=r["@language"],t=r["@direction"];i(e,l["@language"],n&&t?`${n}_${t}`.toLowerCase():n?n.toLowerCase():t?`_${t}`:"@null")}else"@language"in r?i(e,l["@language"],(r["@language"]||"@null").toLowerCase()):"@direction"in r?r["@direction"]?i(e,l["@language"],`_${r["@direction"]}`):i(e,l["@language"],"@none"):a?(i(e,l["@language"],`_${a}`),i(e,l["@language"],"@none"),i(e,l["@type"],"@none")):(i(e,l["@language"],s),i(e,l["@language"],"@none"),i(e,l["@type"],"@none"))}}for(const e in t)r(t,e,1);return n},clone:function(){const e={};e.mappings=util.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=util.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]);"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return 1e4===INITIAL_CONTEXT_CACHE.size&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(n,o),o;function r(e,n,t){const o=e[n],i=e[n]={};let s,a;for(const e of o)(a=t>=(s=e.iri).length?"":s[t])in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&r(i,e,t+1)}function i(e,n,t){n.hasOwnProperty(t)||(n[t]=e)}}),api.getContextValue=((e,n,t)=>{if(null===n){if("@context"===t)return;return null}if(e.mappings.has(n)){const o=e.mappings.get(n);if(_isUndefined(t))return o;if(o.hasOwnProperty(t))return o[t]}return"@language"===t&&t in e?e[t]:"@direction"===t&&t in e?e[t]:"@context"!==t?null:void 0}),api.processingMode=((e,n)=>n.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+n.toString():"json-ld-1.0"===e.processingMode),api.isKeyword=(e=>{if(!_isString(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1});

},{"./JsonLdError":4,"./types":23,"./url":24,"./util":25}],13:[function(require,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=require("../util"),{LINK_HEADER_CONTEXT:LINK_HEADER_CONTEXT}=require("../constants"),JsonLdError=require("../JsonLdError"),RequestQueue=require("../RequestQueue"),{prependBase:prependBase}=require("../url");function _request(e,r){return new Promise((t,n)=>{e(r,(e,r,d)=>{e?n(e):t({res:r,body:d})})})}module.exports=(({secure:e,strictSSL:r=!0,maxRedirects:t=-1,request:n,headers:d={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{d=buildHeaders(d),n=n||require("request");const o=require("http");return(new RequestQueue).wrapLoader(function(s){return async function s(a,i){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&0!==a.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a});let u=null;if(null!==u)return u;let l;let c=null;try{l=await _request(n,{url:a,headers:d,strictSSL:r,followRedirect:!1})}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:e})}const{res:h,body:p}=l;u={contextUrl:null,documentUrl:a,document:p||null};const f=o.STATUS_CODES[h.statusCode];if(h.statusCode>=400)throw new JsonLdError(`URL "${a}" could not be dereferenced: ${f}`,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:h.statusCode});if(h.headers.link&&"application/ld+json"!==h.headers["content-type"]){const e=parseLinkHeader(h.headers.link),r=e[LINK_HEADER_CONTEXT];if(Array.isArray(r))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});r&&(u.contextUrl=r.target),(c=e.alternate)&&"application/ld+json"==c.type&&!(h.headers["content-type"]||"").match(/^application\/(\w*\+)?json$/)&&(h.headers.location=prependBase(a,c.target))}if((c||h.statusCode>=300&&h.statusCode<400)&&h.headers.location){if(i.length===t)throw new JsonLdError("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:h.statusCode,redirects:i});if(-1!==i.indexOf(a))throw new JsonLdError("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:h.statusCode,redirects:i});return i.push(a),s(h.headers.location,i)}i.push(a);return u}(s,[])})});

},{"../JsonLdError":4,"../RequestQueue":8,"../constants":11,"../url":24,"../util":25,"http":1,"request":1}],14:[function(require,module,exports){
"use strict";const{parseLinkHeader:parseLinkHeader,buildHeaders:buildHeaders}=require("../util"),{LINK_HEADER_CONTEXT:LINK_HEADER_CONTEXT}=require("../constants"),JsonLdError=require("../JsonLdError"),RequestQueue=require("../RequestQueue"),{prependBase:prependBase}=require("../url"),REGEX_LINK_HEADER=/(^|(\r\n))link:/i;function _get(e,r,t){const n=new(e=e||XMLHttpRequest);return new Promise((e,o)=>{n.onload=(()=>e(n)),n.onerror=(e=>o(e)),n.open("GET",r,!0);for(const e in t)n.setRequestHeader(e,t[e]);n.send()})}module.exports=(({secure:e,headers:r={},xhr:t}={headers:{}})=>{return r=buildHeaders(r),(new RequestQueue).wrapLoader(async function n(o){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new JsonLdError('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:o});let d;try{d=await _get(t,o,r)}catch(e){throw new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:e})}if(d.status>=400)throw new JsonLdError("URL could not be dereferenced: "+d.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:d.status});let s={contextUrl:null,documentUrl:o,document:d.response};let a=null;const l=d.getResponseHeader("Content-Type");let u;REGEX_LINK_HEADER.test(d.getAllResponseHeaders())&&(u=d.getResponseHeader("Link"));if(u&&"application/ld+json"!==l){const e=parseLinkHeader(u),r=e[LINK_HEADER_CONTEXT];if(Array.isArray(r))throw new JsonLdError("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});r&&(s.contextUrl=r.target),(a=e.alternate)&&"application/ld+json"==a.type&&!(l||"").match(/^application\/(\w*\+)?json$/)&&(s=await n(prependBase(o,a.target)))}return s})});

},{"../JsonLdError":4,"../RequestQueue":8,"../constants":11,"../url":24,"../util":25}],15:[function(require,module,exports){
"use strict";const JsonLdError=require("./JsonLdError"),{isArray:_isArray,isObject:_isObject,isEmptyObject:_isEmptyObject,isString:_isString,isUndefined:_isUndefined}=require("./types"),{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSubject:_isSubject}=require("./graphTypes"),{expandIri:_expandIri,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext,processingMode:_processingMode}=require("./context"),{isAbsolute:_isAbsoluteIri}=require("./url"),{addValue:_addValue,asArray:_asArray,getValues:_getValues,validateTypeValue:_validateTypeValue}=require("./util"),api={};module.exports=api;const REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;async function _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r={},insideList:o,typeKey:s,typeScopedContext:l,expansionMap:d}){const p=Object.keys(a).sort(),c=[];let u;const v=a[s]&&"@json"===_expandIri(e,_isArray(a[s])?a[s][0]:a[s],{vocab:!0},r);for(const s of p){let p,y=a[s];if("@context"===s)continue;let x=_expandIri(e,s,{vocab:!0},r);if((null===x||!_isAbsoluteIri(x)&&!_isKeyword(x))&&void 0===(x=d({unmappedProperty:s,activeCtx:e,activeProperty:t,parent:a,options:r,insideList:o,value:y,expandedParent:i})))continue;if(_isKeyword(x)){if("@reverse"===n)throw new JsonLdError("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y});if(x in i&&"@included"!==x&&"@type"!==x)throw new JsonLdError("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:x})}if("@id"===x){if(!_isString(y)){if(!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(_isObject(y)){if(!_isEmptyObject(y))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}else{if(!_isArray(y))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(!y.every(e=>_isString(e)))throw new JsonLdError('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}}_addValue(i,"@id",_asArray(y).map(t=>_isString(t)?_expandIri(e,t,{base:!0},r):t),{propertyIsArray:r.isFrame});continue}if("@type"===x){_isObject(y)&&(y=Object.fromEntries(Object.entries(y).map(([e,t])=>[_expandIri(l,e,{vocab:!0}),_asArray(t).map(e=>_expandIri(l,e,{base:!0,vocab:!0}))]))),_validateTypeValue(y,r.isFrame),_addValue(i,"@type",_asArray(y).map(e=>_isString(e)?_expandIri(l,e,{base:!0,vocab:!0},r):e),{propertyIsArray:r.isFrame});continue}if("@included"===x&&_processingMode(e,1.1)){const n=_asArray(await api.expand({activeCtx:e,activeProperty:t,element:y,options:r,expansionMap:d}));if(!n.every(e=>_isSubject(e)))throw new JsonLdError("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:y});_addValue(i,"@included",n,{propertyIsArray:!0});continue}if("@graph"===x&&!_isObject(y)&&!_isArray(y))throw new JsonLdError('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y});if("@value"===x){u=y,v&&_processingMode(e,1.1)?i["@value"]=y:_addValue(i,"@value",y,{propertyIsArray:r.isFrame});continue}if("@language"===x){if(null===y)continue;if(!_isString(y)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y});y=_asArray(y).map(e=>_isString(e)?e.toLowerCase():e);for(const e of y)_isString(e)&&!e.match(REGEX_BCP47)&&console.warn(`@language must be valid BCP47: ${e}`);_addValue(i,"@language",y,{propertyIsArray:r.isFrame});continue}if("@direction"===x){if(!_isString(y)&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:y});y=_asArray(y);for(const e of y)if(_isString(e)&&"ltr"!==e&&"rtl"!==e)throw new JsonLdError('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:y});_addValue(i,"@direction",y,{propertyIsArray:r.isFrame});continue}if("@index"===x){if(!_isString(y))throw new JsonLdError('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y});_addValue(i,"@index",y);continue}if("@reverse"===x){if(!_isObject(y))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y});if("@reverse"in(p=await api.expand({activeCtx:e,activeProperty:"@reverse",element:y,options:r,expansionMap:d})))for(const e in p["@reverse"])_addValue(i,e,p["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in p){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),_addValue(t,e,[],{propertyIsArray:!0});const n=p[e];for(let a=0;a<n.length;++a){const i=n[a];if(_isValue(i)||_isList(i))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});_addValue(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===x){c.push(s);continue}let _=e;const g=_getContextValue(e,s,"@context");_isUndefined(g)||(_=await _processContext({activeCtx:e,localCtx:g,propagate:!0,overrideProtected:!0,options:r}));const f=_getContextValue(_,s,"@container")||[];if(f.includes("@language")&&_isObject(y)){p=_expandLanguageMap(_,y,_getContextValue(_,s,"@direction"),r)}else if(f.includes("@index")&&_isObject(y)){const t=f.includes("@graph"),n=_getContextValue(_,s,"@index")||"@index",a="@index"!==n&&_expandIri(e,n,{vocab:!0},r);p=await _expandIndexMap({activeCtx:_,options:r,activeProperty:s,value:y,expansionMap:d,asGraph:t,indexKey:n,propertyIndex:a})}else if(f.includes("@id")&&_isObject(y)){const e=f.includes("@graph");p=await _expandIndexMap({activeCtx:_,options:r,activeProperty:s,value:y,expansionMap:d,asGraph:e,indexKey:"@id"})}else if(f.includes("@type")&&_isObject(y))p=await _expandIndexMap({activeCtx:_.revertToPreviousContext(),options:r,activeProperty:s,value:y,expansionMap:d,asGraph:!1,indexKey:"@type"});else{const a="@list"===x;if(a||"@set"===x){let e=t;a&&"@graph"===n&&(e=null),p=await api.expand({activeCtx:_,activeProperty:e,element:y,options:r,insideList:a,expansionMap:d})}else p="@json"===_getContextValue(e,s,"@type")?{"@type":"@json","@value":y}:await api.expand({activeCtx:_,activeProperty:s,element:y,options:r,insideList:!1,expansionMap:d})}if(null!==p||"@value"===x||void 0!==(p=d({unmappedValue:y,expandedProperty:x,activeCtx:_,activeProperty:t,parent:a,options:r,insideList:o,key:s,expandedParent:i})))if("@list"!==x&&!_isList(p)&&f.includes("@list")&&(p={"@list":_asArray(p)}),f.includes("@graph")&&!f.some(e=>"@id"===e||"@index"===e)&&(p=_asArray(p).map(e=>({"@graph":_asArray(e)}))),_.mappings.has(s)&&_.mappings.get(s).reverse){const e=i["@reverse"]=i["@reverse"]||{};p=_asArray(p);for(let t=0;t<p.length;++t){const n=p[t];if(_isValue(n)||_isList(n))throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});_addValue(e,x,n,{propertyIsArray:!0})}}else _addValue(i,x,p,{propertyIsArray:!0})}if("@value"in i)if("@json"===i["@type"]&&_processingMode(e,1.1));else if((_isObject(u)||_isArray(u))&&!r.isFrame)throw new JsonLdError('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:u});for(const p of c){const c=_isArray(a[p])?a[p]:[a[p]];for(const a of c){if(!_isObject(a)||Object.keys(a).some(t=>"@value"===_expandIri(e,t,{vocab:!0},r)))throw new JsonLdError("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:a});await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:a,expandedParent:i,options:r,insideList:o,typeScopedContext:l,typeKey:s,expansionMap:d})}}}function _expandValue({activeCtx:e,activeProperty:t,value:n,options:a}){if(null==n)return null;const i=_expandIri(e,t,{vocab:!0},a);if("@id"===i)return _expandIri(e,n,{base:!0},a);if("@type"===i)return _expandIri(e,n,{vocab:!0,base:!0},a);const r=_getContextValue(e,t,"@type");if(("@id"===r||"@graph"===i)&&_isString(n))return{"@id":_expandIri(e,n,{base:!0},a)};if("@vocab"===r&&_isString(n))return{"@id":_expandIri(e,n,{vocab:!0,base:!0},a)};if(_isKeyword(i))return n;const o={};if(r&&!["@id","@vocab","@none"].includes(r))o["@type"]=r;else if(_isString(n)){const n=_getContextValue(e,t,"@language");null!==n&&(o["@language"]=n);const a=_getContextValue(e,t,"@direction");null!==a&&(o["@direction"]=a)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),o["@value"]=n,o}function _expandLanguageMap(e,t,n,a){const i=[],r=Object.keys(t).sort();for(const o of r){const r=_expandIri(e,o,{vocab:!0},a);let s=t[o];_isArray(s)||(s=[s]);for(const e of s){if(null===e)continue;if(!_isString(e))throw new JsonLdError("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const a={"@value":e};"@none"!==r&&(a["@language"]=o.toLowerCase()),n&&(a["@direction"]=n),i.push(a)}}return i}async function _expandIndexMap({activeCtx:e,options:t,activeProperty:n,value:a,expansionMap:i,asGraph:r,indexKey:o,propertyIndex:s}){const l=[],d=Object.keys(a).sort(),p="@type"===o;for(let c of d){if(p){const n=_getContextValue(e,c,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let d,u=a[c];_isArray(u)||(u=[u]),u=await api.expand({activeCtx:e,activeProperty:n,element:u,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),d=s?"@none"===c?"@none":_expandValue({activeCtx:e,activeProperty:o,value:c,options:t}):_expandIri(e,c,{vocab:!0},t),"@id"===o?c=_expandIri(e,c,{base:!0},t):p&&(c=d);for(let e of u){if(r&&!_isGraph(e)&&(e={"@graph":[e]}),"@type"===o)"@none"===d||(e["@type"]?e["@type"]=[c].concat(e["@type"]):e["@type"]=[c]);else{if(_isValue(e)&&!["@language","@type","@index"].includes(o))throw new JsonLdError("Invalid JSON-LD syntax; Attempt to add illegal key to value "+`object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});s?"@none"!==d&&_addValue(e,s,d,{propertyIsArray:!0,prependValue:!0}):"@none"===d||o in e||(e[o]=c)}l.push(e)}}return l}api.expand=(async({activeCtx:e,activeProperty:t=null,element:n,options:a={},insideList:i=!1,insideIndex:r=!1,typeScopedContext:o=null,expansionMap:s=(()=>void 0)})=>{if(null==n)return null;if("@default"===t&&(a=Object.assign({},a,{isFrame:!1})),!_isArray(n)&&!_isObject(n)){if(!i&&(null===t||"@graph"===_expandIri(e,t,{vocab:!0},a))){const r=await s({unmappedValue:n,activeCtx:e,activeProperty:t,options:a,insideList:i});return void 0===r?null:r}return _expandValue({activeCtx:e,activeProperty:t,value:n,options:a})}if(_isArray(n)){let l=[];const d=_getContextValue(e,t,"@container")||[];i=i||d.includes("@list");for(let d=0;d<n.length;++d){let p=await api.expand({activeCtx:e,activeProperty:t,element:n[d],options:a,expansionMap:s,insideIndex:r,typeScopedContext:o});i&&_isArray(p)&&(p={"@list":p}),null===p&&void 0===(p=await s({unmappedValue:n[d],activeCtx:e,activeProperty:t,parent:n,index:d,options:a,expandedParent:l,insideList:i}))||(_isArray(p)?l=l.concat(p):l.push(p))}return l}const l=_expandIri(e,t,{vocab:!0},a),d=_getContextValue(e,t,"@context");o=o||(e.previousContext?e:null);let p=Object.keys(n).sort(),c=!r;if(c&&o&&p.length<=2&&!p.includes("@context"))for(const t of p){const n=_expandIri(o,t,{vocab:!0},a);if("@value"===n){c=!1,e=o;break}if("@id"===n&&1===p.length){c=!1;break}}c&&(e=e.revertToPreviousContext()),_isUndefined(d)||(e=await _processContext({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:a})),"@context"in n&&(e=await _processContext({activeCtx:e,localCtx:n["@context"],options:a})),o=e;let u=null;for(const t of p){if("@type"===_expandIri(e,t,{vocab:!0},a)){u=u||t;const i=n[t],r=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of r){const n=_getContextValue(o,t,"@context");_isUndefined(n)||(e=await _processContext({activeCtx:e,localCtx:n,options:a,propagate:!1}))}}}let v={};await _expandObject({activeCtx:e,activeProperty:t,expandedActiveProperty:l,element:n,expandedParent:v,options:a,insideList:i,typeKey:u,typeScopedContext:o,expansionMap:s});let y=(p=Object.keys(v)).length;if("@value"in v){if("@type"in v&&("@language"in v||"@direction"in v))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:v});let r=y-1;if("@type"in v&&(r-=1),"@index"in v&&(r-=1),"@language"in v&&(r-=1),"@direction"in v&&(r-=1),0!==r)throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:v});const o=null===v["@value"]?[]:_asArray(v["@value"]),l=_getValues(v,"@type");if(_processingMode(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===o.length){const r=await s({unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}else{if(!o.every(e=>_isString(e)||_isEmptyObject(e))&&"@language"in v)throw new JsonLdError("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:v});if(!l.every(e=>_isAbsoluteIri(e)&&!(_isString(e)&&0===e.indexOf("_:"))||_isEmptyObject(e)))throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:v})}}else if("@type"in v&&!_isArray(v["@type"]))v["@type"]=[v["@type"]];else if("@set"in v||"@list"in v){if(y>1&&!(2===y&&"@index"in v))throw new JsonLdError('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:v});"@set"in v&&(v=v["@set"],y=(p=Object.keys(v)).length)}else if(1===y&&"@language"in v){const r=await s(v,{unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}if(_isObject(v)&&!a.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===l)&&(0===y||"@value"in v||"@list"in v||1===y&&"@id"in v)){const r=await s({unmappedValue:v,activeCtx:e,activeProperty:t,element:n,options:a,insideList:i});v=void 0!==r?r:null}return v});

},{"./JsonLdError":4,"./context":12,"./graphTypes":19,"./types":23,"./url":24,"./util":25}],16:[function(require,module,exports){
"use strict";const{isSubjectReference:_isSubjectReference}=require("./graphTypes"),{createMergedNodeMap:_createMergedNodeMap}=require("./nodeMap"),api={};module.exports=api,api.flatten=(e=>{const r=_createMergedNodeMap(e),t=[],c=Object.keys(r).sort();for(let e=0;e<c.length;++e){const s=r[c[e]];_isSubjectReference(s)||t.push(s)}return t});

},{"./graphTypes":19,"./nodeMap":21}],17:[function(require,module,exports){
"use strict";const{isKeyword:isKeyword}=require("./context"),graphTypes=require("./graphTypes"),types=require("./types"),util=require("./util"),url=require("./url"),JsonLdError=require("./JsonLdError"),{createNodeMap:_createNodeMap,mergeNodeMapGraphs:_mergeNodeMapGraphs}=require("./nodeMap"),api={};function _createImplicitFrame(e){const r={};for(const t in e)void 0!==e[t]&&(r["@"+t]=[e[t]]);return[r]}function _createsCircularReference(e,r,t){for(let i=t.length-1;i>=0;--i){const s=t[i];if(s.graph===r&&s.subject["@id"]===e["@id"])return!0}return!1}function _getFrameFlag(e,r,t){const i="@"+t;let s=i in e?e[i][0]:r[t];if("embed"===t)if(!0===s)s="@once";else if(!1===s)s="@never";else if("@always"!==s&&"@never"!==s&&"@link"!==s&&"@first"!==s&&"@last"!==s&&"@once"!==s)throw new JsonLdError("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return s}function _validateFrame(e){if(!types.isArray(e)||1!==e.length||!types.isObject(e[0]))throw new JsonLdError("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const r of util.asArray(e[0]["@id"]))if(!types.isObject(r)&&!url.isAbsolute(r)||types.isString(r)&&0===r.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const r of util.asArray(e[0]["@type"]))if(!types.isObject(r)&&!url.isAbsolute(r)||types.isString(r)&&0===r.indexOf("_:"))throw new JsonLdError("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function _filterSubjects(e,r,t,i){const s={};for(const n of r){const r=e.graphMap[e.graph][n];_filterSubject(e,r,t,i)&&(s[n]=r)}return s}function _filterSubject(e,r,t,i){let s=!0,n=!1;for(const a in t){let l=!1;const u=util.getValues(r,a),p=0===util.getValues(t,a).length;if("@id"===a){if(types.isEmptyObject(t["@id"][0]||{})?l=!0:t["@id"].length>=0&&(l=t["@id"].includes(u[0])),!i.requireAll)return l}else if("@type"===a){if(s=!1,p){if(u.length>0)return!1;l=!0}else if(1===t["@type"].length&&types.isEmptyObject(t["@type"][0]))l=u.length>0;else for(const e of t["@type"])l=!!(types.isObject(e)&&"@default"in e)||(l||u.some(r=>r===e));if(!i.requireAll)return l}else{if(isKeyword(a))continue;{const r=util.getValues(t,a)[0];let n=!1;if(r&&(_validateFrame([r]),n="@default"in r),s=!1,0===u.length&&n)continue;if(u.length>0&&p)return!1;if(void 0===r){if(u.length>0)return!1;l=!0}else if(graphTypes.isList(r)){const t=r["@list"][0];if(graphTypes.isList(u[0])){const r=u[0]["@list"];graphTypes.isValue(t)?l=r.some(e=>_valueMatch(t,e)):(graphTypes.isSubject(t)||graphTypes.isSubjectReference(t))&&(l=r.some(r=>_nodeMatch(e,t,r,i)))}}else l=graphTypes.isValue(r)?u.some(e=>_valueMatch(r,e)):graphTypes.isSubjectReference(r)?u.some(t=>_nodeMatch(e,r,t,i)):!!types.isObject(r)&&u.length>0}}if(!l&&i.requireAll)return!1;n=n||l}return s||n}function _removeEmbed(e,r){const t=e.uniqueEmbeds[e.graph],i=t[r],s=i.parent,n=i.property,a={"@id":r};if(types.isArray(s)){for(let e=0;e<s.length;++e)if(util.compareValues(s[e],a)){s[e]=a;break}}else{const e=types.isArray(s[n]);util.removeValue(s,n,a,{propertyIsArray:e}),util.addValue(s,n,a,{propertyIsArray:e})}const l=e=>{const r=Object.keys(t);for(const i of r)i in t&&types.isObject(t[i].parent)&&t[i].parent["@id"]===e&&(delete t[i],l(i))};l(r)}function _cleanupPreserve(e,r){if(types.isArray(e))return e.map(e=>_cleanupPreserve(e,r));if(types.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(graphTypes.isValue(e))return e;if(graphTypes.isList(e))return e["@list"]=_cleanupPreserve(e["@list"],r),e;if("@id"in e){const t=e["@id"];if(r.link.hasOwnProperty(t)){const i=r.link[t].indexOf(e);if(-1!==i)return r.link[t][i];r.link[t].push(e)}else r.link[t]=[e]}for(const t in e)"@id"===t&&r.bnodesToClear.includes(e[t])?delete e["@id"]:e[t]=_cleanupPreserve(e[t],r)}return e}function _addFrameOutput(e,r,t){types.isObject(e)?util.addValue(e,r,t,{propertyIsArray:!0}):e.push(t)}function _nodeMatch(e,r,t,i){if(!("@id"in t))return!1;const s=e.subjects[t["@id"]];return s&&_filterSubject(e,s,r,i)}function _valueMatch(e,r){const t=r["@value"],i=r["@type"],s=r["@language"],n=e["@value"]?types.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],a=e["@type"]?types.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?types.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===n.length&&0===a.length&&0===l.length||!(!n.includes(t)&&!types.isEmptyObject(n[0]))&&(!!(!i&&0===a.length||a.includes(i)||i&&types.isEmptyObject(a[0]))&&!!(!s&&0===l.length||l.includes(s)||s&&types.isEmptyObject(l[0])))}module.exports=api,api.frameMergedOrDefault=((e,r,t)=>{const i={options:t,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},s=new util.IdentifierIssuer("_:b");_createNodeMap(e,i.graphMap,"@default",s),t.merged&&(i.graphMap["@merged"]=_mergeNodeMapGraphs(i.graphMap),i.graph="@merged"),i.subjects=i.graphMap[i.graph];const n=[];return api.frame(i,Object.keys(i.subjects).sort(),r,n),t.pruneBlankNodeIdentifiers&&(t.bnodesToClear=Object.keys(i.bnodeMap).filter(e=>1===i.bnodeMap[e].length)),t.link={},_cleanupPreserve(n,t)}),api.frame=((e,r,t,i,s=null)=>{_validateFrame(t),t=t[0];const n=e.options,a={embed:_getFrameFlag(t,n,"embed"),explicit:_getFrameFlag(t,n,"explicit"),requireAll:_getFrameFlag(t,n,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const l=e.link[e.graph],u=_filterSubjects(e,r,t,a),p=Object.keys(u).sort();for(const o of p){const p=u[o];if(null===s?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===a.embed&&o in l){_addFrameOutput(i,s,l[o]);continue}const d={"@id":o};if(0===o.indexOf("_:")&&util.addValue(e.bnodeMap,o,d,{propertyIsArray:!0}),l[o]=d,("@first"===a.embed||"@last"===a.embed)&&e.is11)throw new JsonLdError("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:t});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(o))if(!e.embedded||"@never"!==a.embed&&!_createsCircularReference(p,e.graph,e.subjectStack))if(!e.embedded||"@first"!=a.embed&&"@once"!=a.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(o)){if("@last"===a.embed&&o in e.uniqueEmbeds[e.graph]&&_removeEmbed(e,o),e.uniqueEmbeds[e.graph][o]={parent:i,property:s},e.subjectStack.push({subject:p,graph:e.graph}),o in e.graphMap){let r=!1,i=null;"@graph"in t?(i=t["@graph"][0],r=!("@merged"===o||"@default"===o),types.isObject(i)||(i={})):(r="@merged"!==e.graph,i={}),r&&api.frame({...e,graph:o,embedded:!1},Object.keys(e.graphMap[o]).sort(),[i],d,"@graph")}"@included"in t&&api.frame({...e,embedded:!1},r,t["@included"],d,"@included");for(const r of Object.keys(p).sort())if(isKeyword(r)){if(d[r]=util.clone(p[r]),"@type"===r)for(const r of p["@type"])0===r.indexOf("_:")&&util.addValue(e.bnodeMap,r,d,{propertyIsArray:!0})}else if(!a.explicit||r in t)for(const i of p[r]){const s=r in t?t[r]:_createImplicitFrame(a);if(graphTypes.isList(i)){const s=t[r]&&t[r][0]&&t[r][0]["@list"]?t[r][0]["@list"]:_createImplicitFrame(a),n={"@list":[]};_addFrameOutput(d,r,n);const l=i["@list"];for(const r of l)graphTypes.isSubjectReference(r)?api.frame({...e,embedded:!0},[r["@id"]],s,n,"@list"):_addFrameOutput(n,"@list",util.clone(r))}else graphTypes.isSubjectReference(i)?api.frame({...e,embedded:!0},[i["@id"]],s,d,r):_valueMatch(s[0],i)&&_addFrameOutput(d,r,util.clone(i))}for(const e of Object.keys(t).sort()){if("@type"===e){if(!(types.isObject(t[e][0])&&"@default"in t[e][0]))continue}else if(isKeyword(e))continue;const r=t[e][0]||{};if(!(_getFrameFlag(r,n,"omitDefault")||e in d)){let t="@null";"@default"in r&&(t=util.clone(r["@default"])),types.isArray(t)||(t=[t]),d[e]=[{"@preserve":t}]}}for(const r of Object.keys(t["@reverse"]||{}).sort()){const i=t["@reverse"][r];for(const t of Object.keys(e.subjects)){util.getValues(e.subjects[t],r).some(e=>e["@id"]===o)&&(d["@reverse"]=d["@reverse"]||{},util.addValue(d["@reverse"],r,[],{propertyIsArray:!0}),api.frame({...e,embedded:!0},[t],i,d["@reverse"][r],s))}}_addFrameOutput(i,s,d),e.subjectStack.pop()}else _addFrameOutput(i,s,d);else _addFrameOutput(i,s,d)}}),api.cleanupNull=((e,r)=>{if(types.isArray(e)){return e.map(e=>api.cleanupNull(e,r)).filter(e=>e)}if("@null"===e)return null;if(types.isObject(e)){if("@id"in e){const t=e["@id"];if(r.link.hasOwnProperty(t)){const i=r.link[t].indexOf(e);if(-1!==i)return r.link[t][i];r.link[t].push(e)}else r.link[t]=[e]}for(const t in e)e[t]=api.cleanupNull(e[t],r)}return e});

},{"./JsonLdError":4,"./context":12,"./graphTypes":19,"./nodeMap":21,"./types":23,"./url":24,"./util":25}],18:[function(require,module,exports){
"use strict";const JsonLdError=require("./JsonLdError"),graphTypes=require("./graphTypes"),types=require("./types"),util=require("./util"),{RDF_LIST:RDF_LIST,RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=require("./constants"),REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,api={};function _RDFToObject(e,t,s){if(e.termType.endsWith("Node"))return{"@id":e.value};const a={"@value":e.value};if(e.language)a["@language"]=e.language;else{let r=e.datatype.value;if(r||(r=XSD_STRING),r===RDF_JSON_LITERAL){r="@json";try{a["@value"]=JSON.parse(a["@value"])}catch(e){throw new JsonLdError("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:a["@value"],cause:e})}}if(t){if(r===XSD_BOOLEAN)"true"===a["@value"]?a["@value"]=!0:"false"===a["@value"]&&(a["@value"]=!1);else if(types.isNumeric(a["@value"]))if(r===XSD_INTEGER){const e=parseInt(a["@value"],10);e.toFixed(0)===a["@value"]&&(a["@value"]=e)}else r===XSD_DOUBLE&&(a["@value"]=parseFloat(a["@value"]));[XSD_BOOLEAN,XSD_INTEGER,XSD_DOUBLE,XSD_STRING].includes(r)||(a["@type"]=r)}else if("i18n-datatype"===s&&r.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=r.split(/[#_]/);e.length>0&&(a["@language"]=e,e.match(REGEX_BCP47)||console.warn(`@language must be valid BCP47: ${e}`)),a["@direction"]=t}else r!==XSD_STRING&&(a["@type"]=r)}return a}module.exports=api,api.fromRDF=(async(e,{useRdfType:t=!1,useNativeTypes:s=!1,rdfDirection:a=null})=>{const r={},l={"@default":r},u={};for(const n of e){const e="DefaultGraph"===n.graph.termType?"@default":n.graph.value;e in l||(l[e]={}),"@default"===e||e in r||(r[e]={"@id":e});const o=l[e],i=n.subject.value,p=n.predicate.value,R=n.object;i in o||(o[i]={"@id":i});const c=o[i],D=R.termType.endsWith("Node");if(!D||R.value in o||(o[R.value]={"@id":R.value}),p===RDF_TYPE&&!t&&D){util.addValue(c,"@type",R.value,{propertyIsArray:!0});continue}const _=_RDFToObject(R,s,a);if(util.addValue(c,p,_,{propertyIsArray:!0}),D)if(R.value===RDF_NIL){const e=o[R.value];"usages"in e||(e.usages=[]),e.usages.push({node:c,property:p,value:_})}else R.value in u?u[R.value]=!1:u[R.value]={node:c,property:p,value:_}}for(const e in l){const t=l[e];if(!(RDF_NIL in t))continue;const s=t[RDF_NIL];if(s.usages){for(let e of s.usages){let s=e.node,a=e.property,r=e.value;const l=[],n=[];let o=Object.keys(s).length;for(;a===RDF_REST&&types.isObject(u[s["@id"]])&&types.isArray(s[RDF_FIRST])&&1===s[RDF_FIRST].length&&types.isArray(s[RDF_REST])&&1===s[RDF_REST].length&&(3===o||4===o&&types.isArray(s["@type"])&&1===s["@type"].length&&s["@type"][0]===RDF_LIST)&&(l.push(s[RDF_FIRST][0]),n.push(s["@id"]),s=(e=u[s["@id"]]).node,a=e.property,r=e.value,o=Object.keys(s).length,graphTypes.isBlankNode(s)););delete r["@id"],r["@list"]=l.reverse();for(const e of n)delete t[e]}delete s.usages}}const n=[],o=Object.keys(r).sort();for(const e of o){const t=r[e];if(e in l){const s=t["@graph"]=[],a=l[e],r=Object.keys(a).sort();for(const e of r){const t=a[e];graphTypes.isSubjectReference(t)||s.push(t)}}graphTypes.isSubjectReference(t)||n.push(t)}return n});

},{"./JsonLdError":4,"./constants":11,"./graphTypes":19,"./types":23,"./util":25}],19:[function(require,module,exports){
"use strict";const types=require("./types"),api={};module.exports=api,api.isSubject=(i=>{if(types.isObject(i)&&!("@value"in i||"@set"in i||"@list"in i)){return Object.keys(i).length>1||!("@id"in i)}return!1}),api.isSubjectReference=(i=>types.isObject(i)&&1===Object.keys(i).length&&"@id"in i),api.isValue=(i=>types.isObject(i)&&"@value"in i),api.isList=(i=>types.isObject(i)&&"@list"in i),api.isGraph=(i=>types.isObject(i)&&"@graph"in i&&1===Object.keys(i).filter(i=>"@id"!==i&&"@index"!==i).length),api.isSimpleGraph=(i=>api.isGraph(i)&&!("@id"in i)),api.isBlankNode=(i=>!!types.isObject(i)&&("@id"in i?0===i["@id"].indexOf("_:"):0===Object.keys(i).length||!("@value"in i||"@set"in i||"@list"in i)));

},{"./types":23}],20:[function(require,module,exports){
(function (process,global){(function (){
const canonize=require("rdf-canonize"),util=require("./util"),ContextResolver=require("./ContextResolver"),IdentifierIssuer=util.IdentifierIssuer,JsonLdError=require("./JsonLdError"),LRU=require("lru-cache"),NQuads=require("./NQuads"),Rdfa=require("./Rdfa"),{expand:_expand}=require("./expand"),{flatten:_flatten}=require("./flatten"),{fromRDF:_fromRDF}=require("./fromRdf"),{toRDF:_toRDF}=require("./toRdf"),{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=require("./frame"),{isArray:_isArray,isObject:_isObject,isString:_isString}=require("./types"),{isSubjectReference:_isSubjectReference}=require("./graphTypes"),{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=require("./context"),{compact:_compact,compactIri:_compactIri}=require("./compact"),{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=require("./nodeMap"),_nodejs="undefined"!=typeof process&&process.versions&&process.versions.node,_browser=!_nodejs&&("undefined"!=typeof window||"undefined"!=typeof self),wrapper=function(e){const t={},n=new LRU({max:100});function o(t,{documentLoader:n=e.documentLoader,...o}){return Object.assign({},{documentLoader:n},o,t)}return e.compact=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===r)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(a=o(a,{base:_isString(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:n})})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,i=a.skipExpansion?t:await e.expand(t,a);const s=await e.processContext(_getInitialContext(a),r,a);let c=await _compact({activeCtx:s,element:i,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&_isArray(c)?1===c.length?c=c[0]:0===c.length&&(c={}):a.graph&&_isObject(c)&&(c=[c]),_isObject(r)&&"@context"in r&&(r=r["@context"]),r=util.clone(r),_isArray(r)||(r=[r]);const u=r;r=[];for(let e=0;e<u.length;++e)(!_isObject(u[e])||Object.keys(u[e]).length>0)&&r.push(u[e]);const d=r.length>0;if(1===r.length&&(r=r[0]),_isArray(c)){const e=_compactIri({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=c;c={},d&&(c["@context"]=r),c[e]=t}else if(_isObject(c)&&d){const e=c;c={"@context":r};for(const t in e)c[t]=e[t]}return c},e.expand=async function(t,r){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(r=o(r,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:n})})).expansionMap&&(r.expansionMap=void 0);const a={},i=[];if("expandContext"in r){const e=util.clone(r.expandContext);_isObject(e)&&"@context"in e?a.expandContext=e:a.expandContext={"@context":e},i.push(a.expandContext)}let s;if(_isString(t)){const n=await e.get(t,r);s=n.documentUrl,a.input=n.document,n.contextUrl&&(a.remoteContext={"@context":n.contextUrl},i.push(a.remoteContext))}else a.input=util.clone(t);"base"in r||(r.base=s||"");let c=_getInitialContext(r);for(const e of i)c=await _processContext({activeCtx:c,localCtx:e,options:r});let u=await _expand({activeCtx:c,element:a.input,options:r,expansionMap:r.expansionMap});return _isObject(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),_isArray(u)||(u=[u]),u},e.flatten=async function(t,r,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");r="function"==typeof r?null:r||null,a=o(a,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const i=await e.expand(t,a),s=_flatten(i);return null===r?s:(a.graph=!0,a.skipExpansion=!0,await e.compact(s,r,a))},e.frame=async function(t,r,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=o(a,{base:_isString(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:n})}),_isString(r)){const t=await e.get(r,a);if(r=t.document,t.contextUrl){let e=r["@context"];e?_isArray(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,r["@context"]=e}}const i=r&&r["@context"]||{},s=await e.processContext(_getInitialContext(a),i,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=_processingMode(s,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=_processingMode(s,1.1));const c=await e.expand(t,a),u={...a};u.isFrame=!0,u.keepFreeFloatingNodes=!0;const d=await e.expand(r,u),l=Object.keys(r).map(e=>_expandIri(s,e,{vocab:!0}));u.merged=!l.includes("@graph"),u.is11=_processingMode(s,1.1);const p=_frameMergedOrDefault(c,d,u);u.graph=!a.omitGraph,u.skipExpansion=!0,u.link={},u.framing=!0;let f=await e.compact(p,i,u);return u.link={},f=_cleanupNull(f,u)},e.link=async function(t,n,o){const r={};return n&&(r["@context"]=n),r["@embed"]="@link",e.frame(t,r,o)},e.normalize=e.canonize=async function(t,r){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(r=o(r,{base:_isString(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})}))){if("application/n-quads"!==r.inputFormat&&"application/nquads"!==r.inputFormat)throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const e=NQuads.parse(t);return canonize.canonize(e,r)}const a={...r};delete a.format,a.produceGeneralizedRdf=!1;const i=await e.toRDF(t,a);return canonize.canonize(i,r)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=o(n,{format:_isString(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:a}=n;if(r){if(!(a=a||t[r]))throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:r})}else a=(()=>e);const i=await a(e);return _fromRDF(i,n)},e.toRDF=async function(t,r){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let a;a=(r=o(r,{base:_isString(t)?t:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:n})})).skipExpansion?t:await e.expand(t,r);const i=_toRDF(a,r);if(r.format){if("application/n-quads"===r.format||"application/nquads"===r.format)return await NQuads.serialize(i);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}return i},e.createNodeMap=async function(t,r){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");r=o(r,{base:_isString(t)?t:"",contextResolver:new ContextResolver({sharedCache:n})});const a=await e.expand(t,r);return _createMergedNodeMap(a,r)},e.merge=async function(t,r,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(t))throw new TypeError('Could not merge, "docs" must be an array.');r="function"==typeof r?null:r||null,a=o(a,{contextResolver:new ContextResolver({sharedCache:n})});const i=await Promise.all(t.map(t=>{const n={...a};return e.expand(t,n)}));let s=!0;"mergeNodes"in a&&(s=a.mergeNodes);const c=a.issuer||new IdentifierIssuer("_:b"),u={"@default":{}};for(let e=0;e<i.length;++e){const t=util.relabelBlankNodes(i[e],{issuer:new IdentifierIssuer("_:b"+e+"-")}),n=s||0===e?u:{"@default":{}};if(_createNodeMap(t,n,"@default",c),n!==u)for(const e in n){const t=n[e];if(!(e in u)){u[e]=t;continue}const o=u[e];for(const e in t)e in o||(o[e]=t[e])}}const d=_mergeNodeMaps(u),l=[],p=Object.keys(d).sort();for(let e=0;e<p.length;++e){const t=d[p[e]];_isSubjectReference(t)||l.push(t)}return null===r?l:(a.graph=!0,a.skipExpansion=!0,await e.compact(l,r,a))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=(async e=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})}),e.get=async function(t,n){let o;o="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const r=await o(t);try{if(!r.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(r.document)&&(r.document=JSON.parse(r.document))}catch(e){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:r})}return r},e.processContext=async function(e,t,r){return r=o(r,{base:"",contextResolver:new ContextResolver({sharedCache:n})}),null===t?_getInitialContext(r):(t=util.clone(t),_isObject(t)&&"@context"in t||(t={"@context":t}),_processContext({activeCtx:e,localCtx:t,options:r}))},e.getContextValue=require("./context").getContextValue,e.documentLoaders={},e.documentLoaders.node=require("./documentLoaders/node"),e.documentLoaders.xhr=require("./documentLoaders/xhr"),e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",NQuads.parse),e.registerRDFParser("application/nquads",NQuads.parse),e.registerRDFParser("rdfa-api",Rdfa.parse),e.url=require("./url"),e.util=util,Object.assign(e,util),e.promises=e,e.RequestQueue=require("./RequestQueue"),e.JsonLdProcessor=require("./JsonLdProcessor")(e),_browser&&void 0===global.JsonLdProcessor&&Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),_nodejs?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},factory=function(){return wrapper(function(){return factory()})};wrapper(factory),module.exports=factory;

}).call(this)}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./ContextResolver":3,"./JsonLdError":4,"./JsonLdProcessor":5,"./NQuads":6,"./Rdfa":7,"./RequestQueue":8,"./compact":10,"./context":12,"./documentLoaders/node":13,"./documentLoaders/xhr":14,"./expand":15,"./flatten":16,"./frame":17,"./fromRdf":18,"./graphTypes":19,"./nodeMap":21,"./toRdf":22,"./types":23,"./url":24,"./util":25,"_process":34,"lru-cache":26,"rdf-canonize":44}],21:[function(require,module,exports){
"use strict";const{isKeyword:isKeyword}=require("./context"),graphTypes=require("./graphTypes"),types=require("./types"),util=require("./util"),JsonLdError=require("./JsonLdError"),api={};module.exports=api,api.createMergedNodeMap=((e,t)=>{const r=(t=t||{}).issuer||new util.IdentifierIssuer("_:b"),i={"@default":{}};return api.createNodeMap(e,i,"@default",r),api.mergeNodeMaps(i)}),api.createNodeMap=((e,t,r,i,o,s)=>{if(types.isArray(e)){for(const o of e)api.createNodeMap(o,t,r,i,void 0,s);return}if(!types.isObject(e))return void(s&&s.push(e));if(graphTypes.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=i.getId(t))}return void(s&&s.push(e))}if(s&&graphTypes.isList(e)){const a=[];return api.createNodeMap(e["@list"],t,r,i,o,a),void s.push({"@list":a})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&i.getId(e)}types.isUndefined(o)&&(o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"]),s&&s.push({"@id":o});const a=t[r],p=a[o]=a[o]||{};p["@id"]=o;const n=Object.keys(e).sort();for(let s of n){if("@id"===s)continue;if("@reverse"===s){const s={"@id":o},p=e["@reverse"];for(const e in p){const o=p[e];for(const p of o){let o=p["@id"];graphTypes.isBlankNode(p)&&(o=i.getId(o)),api.createNodeMap(p,t,r,i,o),util.addValue(a[o],e,s,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===s){o in t||(t[o]={}),api.createNodeMap(e[s],t,o,i);continue}if("@included"===s){api.createNodeMap(e[s],t,r,i);continue}if("@type"!==s&&isKeyword(s)){if("@index"===s&&s in p&&(e[s]!==p[s]||e[s]["@id"]!==p[s]["@id"]))throw new JsonLdError("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[s]=e[s];continue}const n=e[s];if(0===s.indexOf("_:")&&(s=i.getId(s)),0!==n.length)for(let e of n)if("@type"===s&&(e=0===e.indexOf("_:")?i.getId(e):e),graphTypes.isSubject(e)||graphTypes.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const o=graphTypes.isBlankNode(e)?i.getId(e["@id"]):e["@id"];util.addValue(p,s,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),api.createNodeMap(e,t,r,i,o)}else if(graphTypes.isValue(e))util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes.isList(e)){const a=[];api.createNodeMap(e["@list"],t,r,i,o,a),e={"@list":a},util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1})}else api.createNodeMap(e,t,r,i,o),util.addValue(p,s,e,{propertyIsArray:!0,allowDuplicate:!1});else util.addValue(p,s,[],{propertyIsArray:!0})}}),api.mergeNodeMapGraphs=(e=>{const t={};for(const r of Object.keys(e).sort())for(const i of Object.keys(e[r]).sort()){const o=e[r][i];i in t||(t[i]={"@id":i});const s=t[i];for(const e of Object.keys(o).sort())if(isKeyword(e)&&"@type"!==e)s[e]=util.clone(o[e]);else for(const t of o[e])util.addValue(s,e,util.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t}),api.mergeNodeMaps=(e=>{const t=e["@default"],r=Object.keys(e).sort();for(const i of r){if("@default"===i)continue;const r=e[i];let o=t[i];o?"@graph"in o||(o["@graph"]=[]):t[i]=o={"@id":i,"@graph":[]};const s=o["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];graphTypes.isSubjectReference(t)||s.push(t)}}return t});

},{"./JsonLdError":4,"./context":12,"./graphTypes":19,"./types":23,"./util":25}],22:[function(require,module,exports){
"use strict";const{createNodeMap:createNodeMap}=require("./nodeMap"),{isKeyword:isKeyword}=require("./context"),graphTypes=require("./graphTypes"),jsonCanonicalize=require("canonicalize"),types=require("./types"),util=require("./util"),{RDF_FIRST:RDF_FIRST,RDF_REST:RDF_REST,RDF_NIL:RDF_NIL,RDF_TYPE:RDF_TYPE,RDF_JSON_LITERAL:RDF_JSON_LITERAL,RDF_LANGSTRING:RDF_LANGSTRING,XSD_BOOLEAN:XSD_BOOLEAN,XSD_DOUBLE:XSD_DOUBLE,XSD_INTEGER:XSD_INTEGER,XSD_STRING:XSD_STRING}=require("./constants"),{isAbsolute:_isAbsoluteIri}=require("./url"),api={};function _graphToRDF(e,t,a,o,s){const i=Object.keys(t).sort();for(const r of i){const i=t[r],l=Object.keys(i).sort();for(let t of l){const l=i[t];if("@type"===t)t=RDF_TYPE;else if(isKeyword(t))continue;for(const i of l){const l={termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r};if(!_isAbsoluteIri(r))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!_isAbsoluteIri(t))continue;if("BlankNode"===u.termType&&!s.produceGeneralizedRdf)continue;const n=_objectToRDF(i,o,e,a,s.rdfDirection);n&&e.push({subject:l,predicate:u,object:n,graph:a})}}}}function _listToRDF(e,t,a,o,s){const i={termType:"NamedNode",value:RDF_FIRST},r={termType:"NamedNode",value:RDF_REST},l={termType:"NamedNode",value:RDF_NIL},u=e.pop(),n=u?{termType:"BlankNode",value:t.getId()}:l;let p=n;for(const l of e){const e=_objectToRDF(l,t,a,o,s),u={termType:"BlankNode",value:t.getId()};a.push({subject:p,predicate:i,object:e,graph:o}),a.push({subject:p,predicate:r,object:u,graph:o}),p=u}if(u){const e=_objectToRDF(u,t,a,o,s);a.push({subject:p,predicate:i,object:e,graph:o}),a.push({subject:p,predicate:r,object:l,graph:o})}return n}function _objectToRDF(e,t,a,o,s){const i={};if(graphTypes.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let t=e["@value"];const a=e["@type"]||null;if("@json"===a)i.value=jsonCanonicalize(t),i.datatype.value=RDF_JSON_LITERAL;else if(types.isBoolean(t))i.value=t.toString(),i.datatype.value=a||XSD_BOOLEAN;else if(types.isDouble(t)||a===XSD_DOUBLE)types.isDouble(t)||(t=parseFloat(t)),i.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=a||XSD_DOUBLE;else if(types.isNumber(t))i.value=t.toFixed(0),i.datatype.value=a||XSD_INTEGER;else if("i18n-datatype"===s&&"@direction"in e){const a="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;i.datatype.value=a,i.value=t}else"@language"in e?(i.value=t,i.datatype.value=a||RDF_LANGSTRING,i.language=e["@language"]):(i.value=t,i.datatype.value=a||XSD_STRING)}else if(graphTypes.isList(e)){const r=_listToRDF(e["@list"],t,a,o,s);i.termType=r.termType,i.value=r.value}else{const t=types.isObject(e)?e["@id"]:e;i.termType=t.startsWith("_:")?"BlankNode":"NamedNode",i.value=t}return"NamedNode"!==i.termType||_isAbsoluteIri(i.value)?i:null}module.exports=api,api.toRDF=((e,t)=>{const a=new util.IdentifierIssuer("_:b"),o={"@default":{}};createNodeMap(e,o,"@default",a);const s=[],i=Object.keys(o).sort();for(const e of i){let i;if("@default"===e)i={termType:"DefaultGraph",value:""};else{if(!_isAbsoluteIri(e))continue;(i=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=e}_graphToRDF(s,o[e],i,a,t)}return s});

},{"./constants":11,"./context":12,"./graphTypes":19,"./nodeMap":21,"./types":23,"./url":24,"./util":25,"canonicalize":2}],23:[function(require,module,exports){
"use strict";const api={};module.exports=api,api.isArray=Array.isArray,api.isBoolean=(t=>"boolean"==typeof t||"[object Boolean]"===Object.prototype.toString.call(t)),api.isDouble=(t=>api.isNumber(t)&&(-1!==String(t).indexOf(".")||Math.abs(t)>=1e21)),api.isEmptyObject=(t=>api.isObject(t)&&0===Object.keys(t).length),api.isNumber=(t=>"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)),api.isNumeric=(t=>!isNaN(parseFloat(t))&&isFinite(t)),api.isObject=(t=>"[object Object]"===Object.prototype.toString.call(t)),api.isString=(t=>"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)),api.isUndefined=(t=>void 0===t);

},{}],24:[function(require,module,exports){
"use strict";const types=require("./types"),api={};module.exports=api,api.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},api.parse=((e,t)=>{const r={},a=api.parsers[t||"full"],s=a.regex.exec(e);let p=a.keys.length;for(;p--;)r[a.keys[p]]=void 0===s[p]?null:s[p];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=api.removeDotSegments(r.path),r}),api.prependBase=((e,t)=>{if(null===e)return t;if(api.isAbsolute(t))return t;e&&!types.isString(e)||(e=api.parse(e||""));const r=api.parse(t),a={protocol:e.protocol||""};if(null!==r.authority)a.authority=r.authority,a.path=r.path,a.query=r.query;else if(a.authority=e.authority,""===r.path)a.path=e.path,null!==r.query?a.query=r.query:a.query=e.query;else{if(0===r.path.indexOf("/"))a.path=r.path;else{let t=e.path;((t=t.substr(0,t.lastIndexOf("/")+1)).length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,a.path=t}a.query=r.query}""!==r.path&&(a.path=api.removeDotSegments(a.path));let s=a.protocol;return null!==a.authority&&(s+="//"+a.authority),s+=a.path,null!==a.query&&(s+="?"+a.query),null!==r.fragment&&(s+="#"+r.fragment),""===s&&(s="./"),s}),api.removeBase=((e,t)=>{if(null===e)return t;e&&!types.isString(e)||(e=api.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const a=api.parse(t.substr(r.length)),s=e.normalizedPath.split("/"),p=a.normalizedPath.split("/"),i=a.fragment||a.query?0:1;for(;s.length>0&&p.length>i&&s[0]===p[0];)s.shift(),p.shift();let l="";if(s.length>0){s.pop();for(let e=0;e<s.length;++e)l+="../"}return l+=p.join("/"),null!==a.query&&(l+="?"+a.query),null!==a.fragment&&(l+="#"+a.fragment),""===l&&(l="./"),l}),api.removeDotSegments=(e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),a=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),a&&r.push("")):a&&r.push("")}return"/"===e[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")});const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api.isAbsolute=(e=>types.isString(e)&&isAbsoluteRegex.test(e)),api.isRelative=(e=>types.isString(e));

},{"./types":23}],25:[function(require,module,exports){
"use strict";const graphTypes=require("./graphTypes"),types=require("./types"),IdentifierIssuer=require("rdf-canonize").IdentifierIssuer,JsonLdError=require("./JsonLdError"),REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api={};function _labelBlankNodes(e,r){if(types.isArray(r))for(let a=0;a<r.length;++a)r[a]=_labelBlankNodes(e,r[a]);else if(graphTypes.isList(r))r["@list"]=_labelBlankNodes(e,r["@list"]);else if(types.isObject(r)){graphTypes.isBlankNode(r)&&(r["@id"]=e.getId(r["@id"]));const a=Object.keys(r).sort();for(let t=0;t<a.length;++t){const s=a[t];"@id"!==s&&(r[s]=_labelBlankNodes(e,r[s]))}}return r}module.exports=api,api.IdentifierIssuer=IdentifierIssuer,api.clone=function(e){if(e&&"object"==typeof e){let r;if(types.isArray(e)){r=[];for(let a=0;a<e.length;++a)r[a]=api.clone(e[a])}else if(e instanceof Map){r=new Map;for(const[a,t]of e)r.set(a,api.clone(t))}else if(e instanceof Set){r=new Set;for(const a of e)r.add(api.clone(a))}else if(types.isObject(e)){r={};for(const a in e)r[a]=api.clone(e[a])}else r=e.toString();return r}return e},api.asArray=function(e){return Array.isArray(e)?e:[e]},api.buildHeaders=((e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},e)}),api.parseLinkHeader=(e=>{const r={},a=e.match(REGEX_LINK_HEADERS);for(let e=0;e<a.length;++e){let t=a[e].match(REGEX_LINK_HEADER);if(!t)continue;const s={target:t[1]},i=t[2];for(;t=REGEX_LINK_HEADER_PARAMS.exec(i);)s[t[1]]=void 0===t[2]?t[3]:t[2];const p=s.rel||"";Array.isArray(r[p])?r[p].push(s):r.hasOwnProperty(p)?r[p]=[r[p],s]:r[p]=s}return r}),api.validateTypeValue=((e,r)=>{if(!(types.isString(e)||types.isArray(e)&&e.every(e=>types.isString(e)))){if(r&&types.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&api.asArray(e["@default"]).every(e=>types.isString(e)))return}throw new JsonLdError('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}),api.hasProperty=((e,r)=>{if(e.hasOwnProperty(r)){const a=e[r];return!types.isArray(a)||a.length>0}return!1}),api.hasValue=((e,r,a)=>{if(api.hasProperty(e,r)){let t=e[r];const s=graphTypes.isList(t);if(types.isArray(t)||s){s&&(t=t["@list"]);for(let e=0;e<t.length;++e)if(api.compareValues(a,t[e]))return!0}else if(!types.isArray(a))return api.compareValues(a,t)}return!1}),api.addValue=((e,r,a,t)=>{if("propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1),"valueIsArray"in t||(t.valueIsArray=!1),"allowDuplicate"in t||(t.allowDuplicate=!0),"prependValue"in t||(t.prependValue=!1),t.valueIsArray)e[r]=a;else if(types.isArray(a)){0===a.length&&t.propertyIsArray&&!e.hasOwnProperty(r)&&(e[r]=[]),t.prependValue&&(a=a.concat(e[r]),e[r]=[]);for(let s=0;s<a.length;++s)api.addValue(e,r,a[s],t)}else if(e.hasOwnProperty(r)){const s=!t.allowDuplicate&&api.hasValue(e,r,a);types.isArray(e[r])||s&&!t.propertyIsArray||(e[r]=[e[r]]),s||(t.prependValue?e[r].unshift(a):e[r].push(a))}else e[r]=t.propertyIsArray?[a]:a}),api.getValues=((e,r)=>[].concat(e[r]||[])),api.removeProperty=((e,r)=>{delete e[r]}),api.removeValue=((e,r,a,t)=>{"propertyIsArray"in(t=t||{})||(t.propertyIsArray=!1);const s=api.getValues(e,r).filter(e=>!api.compareValues(e,a));0===s.length?api.removeProperty(e,r):1!==s.length||t.propertyIsArray?e[r]=s:e[r]=s[0]}),api.relabelBlankNodes=((e,r)=>{return _labelBlankNodes((r=r||{}).issuer||new IdentifierIssuer("_:b"),e)}),api.compareValues=((e,r)=>e===r||(!(!graphTypes.isValue(e)||!graphTypes.isValue(r)||e["@value"]!==r["@value"]||e["@type"]!==r["@type"]||e["@language"]!==r["@language"]||e["@index"]!==r["@index"])||!!(types.isObject(e)&&"@id"in e&&types.isObject(r)&&"@id"in r)&&e["@id"]===r["@id"])),api.compareShortestLeast=((e,r)=>e.length<r.length?-1:r.length<e.length?1:e===r?0:e<r?-1:1);

},{"./JsonLdError":4,"./graphTypes":19,"./types":23,"rdf-canonize":44}],26:[function(require,module,exports){
"use strict";const Yallist=require("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=t.max||1/0;const e=t.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof e?naiveLength:e,this[ALLOW_STALE]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=t.maxAge||0,this[DISPOSE]=t.dispose,this[NO_DISPOSE_ON_SET]=t.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[MAX]=t||1/0,trim(this)}get max(){return this[MAX]}set allowStale(t){this[ALLOW_STALE]=!!t}get allowStale(){return this[ALLOW_STALE]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=t,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=t,this[LENGTH]=0,this[LRU_LIST].forEach(t=>{t.length=this[LENGTH_CALCULATOR](t.value,t.key),this[LENGTH]+=t.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(t,e){e=e||this;for(let s=this[LRU_LIST].tail;null!==s;){const i=s.prev;forEachStep(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[LRU_LIST].head;null!==s;){const i=s.next;forEachStep(this,t,s,e),s=i}}keys(){return this[LRU_LIST].toArray().map(t=>t.key)}values(){return this[LRU_LIST].toArray().map(t=>t.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(t=>this[DISPOSE](t.key,t.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[LRU_LIST]}set(t,e,s){if((s=s||this[MAX_AGE])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,h=this[LENGTH_CALCULATOR](e,t);if(this[CACHE].has(t)){if(h>this[MAX])return del(this,this[CACHE].get(t)),!1;const n=this[CACHE].get(t).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[LENGTH]+=h-n.length,n.length=h,this.get(t),trim(this),!0}const n=new Entry(t,e,h,i,s);return n.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](t,e),!1):(this[LENGTH]+=n.length,this[LRU_LIST].unshift(n),this[CACHE].set(t,this[LRU_LIST].head),trim(this),!0)}has(t){if(!this[CACHE].has(t))return!1;const e=this[CACHE].get(t).value;return!isStale(this,e)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){const t=this[LRU_LIST].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[CACHE].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],h=i.e||0;if(0===h)this.set(i.k,i.v);else{const t=h-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[CACHE].forEach((t,e)=>get(this,e,!1))}}const get=(t,e,s)=>{const i=t[CACHE].get(e);if(i){const e=i.value;if(isStale(t,e)){if(del(t,i),!t[ALLOW_STALE])return}else s&&(t[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),t[LRU_LIST].unshiftNode(i));return e.value}},isStale=(t,e)=>{if(!e||!e.maxAge&&!t[MAX_AGE])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[MAX_AGE]&&s>t[MAX_AGE]},trim=t=>{if(t[LENGTH]>t[MAX])for(let e=t[LRU_LIST].tail;t[LENGTH]>t[MAX]&&null!==e;){const s=e.prev;del(t,e),e=s}},del=(t,e)=>{if(e){const s=e.value;t[DISPOSE]&&t[DISPOSE](s.key,s.value),t[LENGTH]-=s.length,t[CACHE].delete(s.key),t[LRU_LIST].removeNode(e)}};class Entry{constructor(t,e,s,i,h){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=h||0}}const forEachStep=(t,e,s,i)=>{let h=s.value;isStale(t,h)&&(del(t,s),t[ALLOW_STALE]||(h=void 0)),h&&e.call(i,h.value,h.key,t)};module.exports=LRUCache;

},{"yallist":48}],27:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,t;function n(){return e.apply(null,arguments)}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(r(e,t))return!1;return!0}function o(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function d(e,t){for(var n in t)r(t,n)&&(e[n]=t[n]);return r(t,"toString")&&(e.toString=t.toString),r(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,s){return Tt(e,t,n,s,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var n=f(e),s=t.call(n.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&s);if(e._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function _(e){var t=c(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),s=n.length>>>0;for(t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=n.momentProperties=[],g=!1;function w(e,t){var n,s,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)o(i=t[s=y[n]])||(e[s]=i);return e}function p(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,n.updateOffset(this),g=!1)}function v(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function k(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function M(e,t){var s=!0;return d(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),s){var i,a,o,u=[];for(a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(o in i+="\n["+a+"] ",arguments[0])r(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[a];u.push(i)}k(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),s=!1}return t.apply(this,arguments)},t)}var D,S={};function Y(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),S[e]||(k(t),S[e]=!0)}function O(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=d({},e);for(n in t)r(t,n)&&(i(e[n])&&i(t[n])?(s[n]={},d(s[n],e[n]),d(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)r(e,n)&&!r(t,n)&&i(e[n])&&(s[n]=d({},s[n]));return s}function x(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,D=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)r(e,t)&&n.push(t);return n};function T(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(e){var t,n,s,i=e.match(N);for(t=0,n=i.length;t<n;t++)W[i[t]]?i[t]=W[i[t]]:i[t]=(s=i[t]).match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"");return function(t){var s,r="";for(s=0;s<n;s++)r+=O(i[s])?i[s].call(t,e):i[s];return r}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,n-=1;return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function V(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e)r(e,n)&&(t=V(n))&&(s[t]=e[n]);return s}var E={};function A(e,t){E[e]=t}function j(e){return e%4==0&&e%100!=0||e%400==0}function I(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=I(t)),n}function z(e,t){return function(s){return null!=s?(q(this,e,s),n.updateOffset(this,t),this):$(this,e)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&j(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Te(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var B,J=/\d/,Q=/\d\d/,X=/\d{3}/,K=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,re=/\d{1,4}/,ae=/[+-]?\d{1,6}/,oe=/\d+/,ue=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ce(e,t,n){B[e]=O(t)?t:function(e,s){return e&&n?n:t}}function fe(e,t){return r(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}B={};var _e={};function ye(e,t){var n,s=t;for("string"==typeof e&&(e=[e]),u(t)&&(s=function(e,n){n[t]=Z(e)}),n=0;n<e.length;n++)_e[e[n]]=s}function ge(e,t){ye(e,function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)})}function we(e,t,n){null!=t&&r(_e,e)&&_e[e](t,n._a,n,e)}var pe,ve=0,ke=1,Me=2,De=3,Se=4,Ye=5,Oe=6,be=7,xe=8;function Te(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?j(e)?29:28:31-s%7%2}pe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),C("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),A("month",8),ce("M",te),ce("MM",te,Q),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),ye(["M","MM"],function(e,t){t[ke]=Z(e)-1}),ye(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ke]=i:f(n).invalidMonth=e});var Ne="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,We=de,Ce=de;function Ue(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Z(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Te(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function He(e){return null!=e?(Ue(this,e),n.updateOffset(this,!0),this):$(this,"Month")}function Fe(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=c([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=me(s[t]),i[t]=me(i[t]);for(t=0;t<24;t++)r[t]=me(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Le(e){return j(e)?366:365}C("Y",0,0,function(){var e=this.year();return e<=9999?T(e,4):"+"+e}),C(0,["YY",2],0,function(){return this.year()%100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),L("year","y"),A("year",1),ce("Y",ue),ce("YY",te,Q),ce("YYYY",re,K),ce("YYYYY",ae,ee),ce("YYYYYY",ae,ee),ye(["YYYYY","YYYYYY"],ve),ye("YYYY",function(e,t){t[ve]=2===e.length?n.parseTwoDigitYear(e):Z(e)}),ye("YY",function(e,t){t[ve]=n.parseTwoDigitYear(e)}),ye("Y",function(e,t){t[ve]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return Z(e)+(Z(e)>68?1900:2e3)};var Ve=z("FullYear",!0);function Ge(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ee(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ae(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ee(e,s,i);return o<=0?a=Le(r=e-1)+o:o>Le(e)?(r=e+1,a=o-Le(e)):(r=e,a=o),{year:r,dayOfYear:a}}function je(e,t,n){var s,i,r=Ee(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ie(i=e.year()-1,t,n):a>Ie(e.year(),t,n)?(s=a-Ie(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ie(e,t,n){var s=Ee(e,t,n),i=Ee(e+1,t,n);return(Le(e)-s+i)/7}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),A("week",5),A("isoWeek",5),ce("w",te),ce("ww",te,Q),ce("W",te),ce("WW",te,Q),ge(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=Z(e)});function Ze(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("d",0,"do","day"),C("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),C("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ce("d",te),ce("e",te),ce("E",te),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,s){t[s]=Z(e)});var ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Be=de,Je=de,Qe=de;function Xe(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),s=me(this.weekdaysMin(n,"")),i=me(this.weekdaysShort(n,"")),r=me(this.weekdays(n,"")),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);a.sort(e),o.sort(e),u.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ke(){return this.hours()%12||12}function et(e,t){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function tt(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Ke),C("k",["kk",2],0,function(){return this.hours()||24}),C("hmm",0,0,function(){return""+Ke.apply(this)+T(this.minutes(),2)}),C("hmmss",0,0,function(){return""+Ke.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),et("a",!0),et("A",!1),L("hour","h"),A("hour",13),ce("a",tt),ce("A",tt),ce("H",te),ce("h",te),ce("k",te),ce("HH",te,Q),ce("hh",te,Q),ce("kk",te,Q),ce("hmm",ne),ce("hmmss",se),ce("Hmm",ne),ce("Hmmss",se),ye(["H","HH"],De),ye(["k","kk"],function(e,t,n){var s=Z(e);t[De]=24===s?0:s}),ye(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ye(["h","hh"],function(e,t,n){t[De]=Z(e),f(n).bigHour=!0}),ye("hmm",function(e,t,n){var s=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s)),f(n).bigHour=!0}),ye("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s,2)),t[Ye]=Z(e.substr(i)),f(n).bigHour=!0}),ye("Hmm",function(e,t,n){var s=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s))}),ye("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s,2)),t[Ye]=Z(e.substr(i))});var nt=z("Hours",!0);var st,it={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ne,monthsShort:Pe,week:{dow:0,doy:6},weekdays:ze,weekdaysMin:qe,weekdaysShort:$e,meridiemParse:/[ap]\.?m?\.?/i},rt={},at={};function ot(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function ut(e){return e?e.toLowerCase().replace("_","-"):e}function lt(e){var t=null;if(void 0===rt[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=st._abbr,require("./locale/"+e),ht(t)}catch(t){rt[e]=null}return rt[e]}function ht(e,t){var n;return e&&((n=o(t)?ct(e):dt(e,t))?st=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),st._abbr}function dt(e,t){if(null!==t){var n,s=it;if(t.abbr=e,null!=rt[e])Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=rt[e]._config;else if(null!=t.parentLocale)if(null!=rt[t.parentLocale])s=rt[t.parentLocale]._config;else{if(null==(n=lt(t.parentLocale)))return at[t.parentLocale]||(at[t.parentLocale]=[]),at[t.parentLocale].push({name:e,config:t}),null;s=n._config}return rt[e]=new x(b(s,t)),at[e]&&at[e].forEach(function(e){dt(e.name,e.config)}),ht(e),rt[e]}return delete rt[e],null}function ct(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return st;if(!s(e)){if(t=lt(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=ut(e[r]).split("-")).length,n=(n=ut(e[r+1]))?n.split("-"):null;t>0;){if(s=lt(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&ot(i,n)>=t-1)break;t--}r++}return st}(e)}function ft(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ke]<0||n[ke]>11?ke:n[Me]<1||n[Me]>Te(n[ve],n[ke])?Me:n[De]<0||n[De]>24||24===n[De]&&(0!==n[Se]||0!==n[Ye]||0!==n[Oe])?De:n[Se]<0||n[Se]>59?Se:n[Ye]<0||n[Ye]>59?Ye:n[Oe]<0||n[Oe]>999?Oe:-1,f(e)._overflowDayOfYear&&(t<ve||t>Me)&&(t=Me),f(e)._overflowWeeks&&-1===t&&(t=be),f(e)._overflowWeekday&&-1===t&&(t=xe),f(e).overflow=t),e}var mt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],wt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((-?\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Mt(e){var t,n,s,i,r,a,o=e._i,u=mt.exec(o)||_t.exec(o);if(u){for(f(e).iso=!0,t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[1])){i=gt[t][0],s=!1!==gt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=wt.length;t<n;t++)if(wt[t][1].exec(u[3])){r=(u[2]||" ")+wt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!yt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),bt(e)}else e._isValid=!1}function Dt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function St(e){var t,n,s,i,r,a,o,u,l=vt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){if(n=l[4],s=l[3],i=l[2],r=l[5],a=l[6],o=l[7],u=[Dt(n),Pe.indexOf(s),parseInt(i,10),parseInt(r,10),parseInt(a,10)],o&&u.push(parseInt(o,10)),t=u,!function(e,t,n){return!e||$e.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return kt[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(l[8],l[9],l[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function Yt(e,t,n){return null!=e?e:null!=t?t:n}function Ot(e){var t,s,i,r,a,o=[];if(!e._d){for(i=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Me]&&null==e._a[ke]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=Yt(t.GG,e._a[ve],je(Nt(),1,4).year),s=Yt(t.W,1),((i=Yt(t.E,1))<1||i>7)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=je(Nt(),r,a),n=Yt(t.gg,e._a[ve],l.year),s=Yt(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(u=!0)):i=r);s<1||s>Ie(n,r,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(o=Ae(n,s,i,r,a),e._a[ve]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=Yt(e._a[ve],i[ve]),(e._dayOfYear>Le(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),s=Ge(a,0,e._dayOfYear),e._a[ke]=s.getUTCMonth(),e._a[Me]=s.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&0===e._a[Oe]&&(e._nextDay=!0,e._a[De]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,o),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[De]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(f(e).weekdayMismatch=!0)}}function bt(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,s,i,r,a,o,u=""+e._i,l=u.length,h=0;for(i=H(e._f,e._locale).match(N)||[],t=0;t<i.length;t++)r=i[t],(s=(u.match(fe(r,e))||[])[0])&&((a=u.substr(0,u.indexOf(s))).length>0&&f(e).unusedInput.push(a),u=u.slice(u.indexOf(s)+s.length),h+=s.length),W[r]?(s?f(e).empty=!1:f(e).unusedTokens.push(r),we(r,s,e)):e._strict&&!s&&f(e).unusedTokens.push(r);f(e).charsLeftOver=l-h,u.length>0&&f(e).unusedInput.push(u),e._a[De]<=12&&!0===f(e).bigHour&&e._a[De]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[De]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}(e._locale,e._a[De],e._meridiem),null!==(o=f(e).era)&&(e._a[ve]=e._locale.erasConvertYear(o,e._a[ve])),Ot(e),ft(e)}else St(e);else Mt(e)}function xt(e){var t=e._i,r=e._f;return e._locale=e._locale||ct(e._l),null===t||void 0===r&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new p(ft(t)):(l(t)?e._d=t:s(r)?function(e){var t,n,s,i,r,a,o=!1;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)r=0,a=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],bt(t),m(t)&&(a=!0),r+=f(t).charsLeftOver,r+=10*f(t).unusedTokens.length,f(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));d(e,n||t)}(e):r?bt(e):function(e){var t=e._i;o(t)?e._d=new Date(n.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=pt.exec(e._i);null===t?(Mt(e),!1===e._isValid&&(delete e._isValid,St(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):s(t)?(e._a=h(t.slice(0),function(e){return parseInt(e,10)}),Ot(e)):i(t)?function(e){if(!e._d){var t=G(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ot(e)}}(e):u(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Tt(e,t,n,r,o){var u,l={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(i(e)&&a(e)||s(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=n,l._i=e,l._f=t,l._strict=r,(u=new p(ft(xt(l))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Nt(e,t,n,s){return Tt(e,t,n,s,!1)}n.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Pt=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Rt=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function Wt(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Nt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Ct=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ut(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,u=t.hour||0,l=t.minute||0,h=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,s=!1;for(t in e)if(r(e,t)&&(-1===pe.call(Ct,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Ct.length;++n)if(e[Ct[n]]){if(s)return!1;parseFloat(e[Ct[n]])!==Z(e[Ct[n]])&&(s=!0)}return!0}(t),this._milliseconds=+d+1e3*h+6e4*l+1e3*u*60*60,this._days=+o+7*a,this._months=+i+3*s+12*n,this._data={},this._locale=ct(),this._bubble()}function Ht(e){return e instanceof Ut}function Ft(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,t){C(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+T(~~(e/60),2)+t+T(~~e%60,2)})}Lt("Z",":"),Lt("ZZ",""),ce("Z",he),ce("ZZ",he),ye(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Gt(he,e)});var Vt=/([\+\-]|\d\d)/gi;function Gt(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(Vt)||["-",0,0])[1]+Z(n[2]))?0:"+"===n[0]?s:-s}function Et(e,t){var s,i;return t._isUTC?(s=t.clone(),i=(v(e)||l(e)?e.valueOf():Nt(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),n.updateOffset(s,!1),s):Nt(e).local()}function At(e){return-Math.round(e._d.getTimezoneOffset())}function jt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}n.updateOffset=function(){};var It=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Zt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zt(e,t){var n,s,i,a=e,o=null;return Ht(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(o=It.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:Z(o[Me])*n,h:Z(o[De])*n,m:Z(o[Se])*n,s:Z(o[Ye])*n,ms:Z(Ft(1e3*o[Oe]))*n}):(o=Zt.exec(e))?(n="-"===o[1]?-1:1,a={y:$t(o[2],n),M:$t(o[3],n),w:$t(o[4],n),d:$t(o[5],n),h:$t(o[6],n),m:$t(o[7],n),s:$t(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Et(t,e),e.isBefore(t)?n=qt(e,t):((n=qt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Nt(a.from),Nt(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),s=new Ut(a),Ht(e)&&r(e,"_locale")&&(s._locale=e._locale),Ht(e)&&r(e,"_isValid")&&(s._isValid=e._isValid),s}function $t(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Bt(e,t){return function(n,s){var i;return null===s||isNaN(+s)||(Y(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),Jt(this,zt(n,s),e),this}}function Jt(e,t,s,i){var r=t._milliseconds,a=Ft(t._days),o=Ft(t._months);e.isValid()&&(i=null==i||i,o&&Ue(e,$(e,"Month")+o*s),a&&q(e,"Date",$(e,"Date")+a*s),r&&e._d.setTime(e._d.valueOf()+r*s),i&&n.updateOffset(e,a||o))}zt.fn=Ut.prototype,zt.invalid=function(){return zt(NaN)};var Qt=Bt(1,"add"),Xt=Bt(-1,"subtract");function Kt(e){return"string"==typeof e||e instanceof String}function en(e){return v(e)||l(e)||Kt(e)||u(e)||function(e){var t=s(e),n=!1;t&&(n=0===e.filter(function(t){return!u(t)&&Kt(e)}).length);return t&&n}(e)||function(e){var t,n,s=i(e)&&!a(e),o=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<u.length;t+=1)n=u[t],o=o||r(e,n);return s&&o}(e)||null==e}function tn(e,t){if(e.date()<t.date())return-tn(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function nn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ct(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sn=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function rn(){return this._locale}var an=1e3,on=60*an,un=60*on,ln=3506328*un;function hn(e,t){return(e%t+t)%t}function dn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ln:new Date(e,t,n).valueOf()}function cn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ln:Date.UTC(e,t,n)}function fn(e,t){return t.erasAbbrRegex(e)}function mn(){var e,t,n=[],s=[],i=[],r=[],a=this.eras();for(e=0,t=a.length;e<t;++e)s.push(me(a[e].name)),n.push(me(a[e].abbr)),i.push(me(a[e].narrow)),r.push(me(a[e].name)),r.push(me(a[e].abbr)),r.push(me(a[e].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function _n(e,t){C(0,[e,e.length],0,t)}function yn(e,t,n,s,i){var r;return null==e?je(this,s,i).year:(t>(r=Ie(e,s,i))&&(t=r),function(e,t,n,s,i){var r=Ae(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),ce("N",fn),ce("NN",fn),ce("NNN",fn),ce("NNNN",function(e,t){return t.erasNameRegex(e)}),ce("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?f(n).era=i:f(n).invalidEra=e}),ce("y",oe),ce("yy",oe),ce("yyy",oe),ce("yyyy",oe),ce("yo",function(e,t){return t._eraYearOrdinalRegex||oe}),ye(["y","yy","yyy","yyyy"],ve),ye(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ve]=n._locale.eraYearOrdinalParse(e,i):t[ve]=parseInt(e,10)}),C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100}),_n("gggg","weekYear"),_n("ggggg","weekYear"),_n("GGGG","isoWeekYear"),_n("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ce("G",ue),ce("g",ue),ce("GG",te,Q),ce("gg",te,Q),ce("GGGG",re,K),ce("gggg",re,K),ce("GGGGG",ae,ee),ce("ggggg",ae,ee),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=Z(e)}),ge(["gg","GG"],function(e,t,s,i){t[i]=n.parseTwoDigitYear(e)}),C("Q",0,"Qo","quarter"),L("quarter","Q"),A("quarter",7),ce("Q",J),ye("Q",function(e,t){t[ke]=3*(Z(e)-1)}),C("D",["DD",2],"Do","date"),L("date","D"),A("date",9),ce("D",te),ce("DD",te,Q),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ye(["D","DD"],Me),ye("Do",function(e,t){t[Me]=Z(e.match(te)[0])});var gn=z("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),A("dayOfYear",4),ce("DDD",ie),ce("DDDD",X),ye(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Z(e)}),C("m",["mm",2],0,"minute"),L("minute","m"),A("minute",14),ce("m",te),ce("mm",te,Q),ye(["m","mm"],Se);var wn=z("Minutes",!1);C("s",["ss",2],0,"second"),L("second","s"),A("second",15),ce("s",te),ce("ss",te,Q),ye(["s","ss"],Ye);var pn,vn,kn=z("Seconds",!1);for(C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return 10*this.millisecond()}),C(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),C(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),C(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),C(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),C(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),A("millisecond",16),ce("S",ie,J),ce("SS",ie,Q),ce("SSS",ie,X),pn="SSSS";pn.length<=9;pn+="S")ce(pn,oe);function Mn(e,t){t[Oe]=Z(1e3*("0."+e))}for(pn="S";pn.length<=9;pn+="S")ye(pn,Mn);vn=z("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var Dn=p.prototype;function Sn(e){return e}Dn.add=Qt,Dn.calendar=function(e,t){1===arguments.length&&(arguments[0]?en(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=i(e)&&!a(e),s=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)s=s||r(e,o[t]);return n&&s}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||Nt(),o=Et(s,this).startOf("day"),u=n.calendarFormat(this,o)||"sameElse",l=t&&(O(t[u])?t[u].call(this,s):t[u]);return this.format(l||this.localeData().calendar(u,this,Nt(s)))},Dn.clone=function(){return new p(this)},Dn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Et(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=V(t)){case"year":r=tn(this,s)/12;break;case"month":r=tn(this,s);break;case"quarter":r=tn(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:I(r)},Dn.endOf=function(e){var t,s;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?cn:dn,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=un-hn(t+(this._isUTC?0:this.utcOffset()*on),un)-1;break;case"minute":t=this._d.valueOf(),t+=on-hn(t,on)-1;break;case"second":t=this._d.valueOf(),t+=an-hn(t,an)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},Dn.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},Dn.from=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Nt(e).isValid())?zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Dn.fromNow=function(e){return this.from(Nt(),e)},Dn.to=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Nt(e).isValid())?zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Dn.toNow=function(e){return this.to(Nt(),e)},Dn.get=function(e){return O(this[e=V(e)])?this[e]():this},Dn.invalidAt=function(){return f(this).overflow},Dn.isAfter=function(e,t){var n=v(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Dn.isBefore=function(e,t){var n=v(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Dn.isBetween=function(e,t,n,s){var i=v(e)?e:Nt(e),r=v(t)?t:Nt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))},Dn.isSame=function(e,t){var n,s=v(e)?e:Nt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Dn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Dn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Dn.isValid=function(){return m(this)},Dn.lang=sn,Dn.locale=nn,Dn.localeData=rn,Dn.max=Rt,Dn.min=Pt,Dn.parsingFlags=function(){return d({},f(this))},Dn.set=function(e,t){if("object"==typeof e){var n,s=function(e){var t,n=[];for(t in e)r(e,t)&&n.push({unit:t,priority:E[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=G(e));for(n=0;n<s.length;n++)this[s[n].unit](e[s[n].unit])}else if(O(this[e=V(e)]))return this[e](t);return this},Dn.startOf=function(e){var t,s;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?cn:dn,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=hn(t+(this._isUTC?0:this.utcOffset()*on),un);break;case"minute":t=this._d.valueOf(),t-=hn(t,on);break;case"second":t=this._d.valueOf(),t-=hn(t,an)}return this._d.setTime(t),n.updateOffset(this,!0),this},Dn.subtract=Xt,Dn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Dn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Dn.toDate=function(){return new Date(this.valueOf())},Dn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Dn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Dn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Dn.toJSON=function(){return this.isValid()?this.toISOString():null},Dn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Dn.unix=function(){return Math.floor(this.valueOf()/1e3)},Dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Dn.eraName=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].name;if(s[e].until<=n&&n<=s[e].since)return s[e].name}return""},Dn.eraNarrow=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].narrow;if(s[e].until<=n&&n<=s[e].since)return s[e].narrow}return""},Dn.eraAbbr=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].abbr;if(s[e].until<=n&&n<=s[e].since)return s[e].abbr}return""},Dn.eraYear=function(){var e,t,s,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=r[e].since<=r[e].until?1:-1,i=this.clone().startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-n(r[e].since).year())*s+r[e].offset;return this.year()},Dn.year=Ve,Dn.isLeapYear=function(){return j(this.year())},Dn.weekYear=function(e){return yn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Dn.isoWeekYear=function(e){return yn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Dn.quarter=Dn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Dn.month=He,Dn.daysInMonth=function(){return Te(this.year(),this.month())},Dn.week=Dn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Dn.isoWeek=Dn.isoWeeks=function(e){var t=je(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Dn.weeksInYear=function(){var e=this.localeData()._week;return Ie(this.year(),e.dow,e.doy)},Dn.weeksInWeekYear=function(){var e=this.localeData()._week;return Ie(this.weekYear(),e.dow,e.doy)},Dn.isoWeeksInYear=function(){return Ie(this.year(),1,4)},Dn.isoWeeksInISOWeekYear=function(){return Ie(this.isoWeekYear(),1,4)},Dn.date=gn,Dn.day=Dn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Dn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Dn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Dn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Dn.hour=Dn.hours=nt,Dn.minute=Dn.minutes=wn,Dn.second=Dn.seconds=kn,Dn.millisecond=Dn.milliseconds=vn,Dn.utcOffset=function(e,t,s){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Gt(he,e)))return this}else Math.abs(e)<16&&!s&&(e*=60);return!this._isUTC&&t&&(i=At(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Jt(this,zt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:At(this)},Dn.utc=function(e){return this.utcOffset(0,e)},Dn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(At(this),"m")),this},Dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Gt(le,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Dn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Nt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Dn.isUtc=jt,Dn.isUTC=jt,Dn.zoneAbbr=function(){return this._isUTC?"UTC":""},Dn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Dn.dates=M("dates accessor is deprecated. Use date instead.",gn),Dn.months=M("months accessor is deprecated. Use month instead",He),Dn.years=M("years accessor is deprecated. Use year instead",Ve),Dn.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Dn.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=xt(t))._a?(e=t._isUTC?c(t._a):Nt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&Z(e[s])!==Z(t[s]))&&a++;return a+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Yn=x.prototype;function On(e,t,n,s){var i=ct(),r=c().set(s,t);return i[n](r,e)}function bn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return On(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=On(e,s,n,"month");return i}function xn(e,t,n,s){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,r=ct(),a=e?r._week.dow:0,o=[];if(null!=n)return On(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=On(t,(i+a)%7,s,"day");return o}Yn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},Yn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Yn.invalidDate=function(){return this._invalidDate},Yn.ordinal=function(e){return this._ordinal.replace("%d",e)},Yn.preparse=Sn,Yn.postformat=Sn,Yn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},Yn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)},Yn.set=function(e){var t,n;for(n in e)r(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Yn.eras=function(e,t){var s,i,r,a=this._eras||ct("en")._eras;for(s=0,i=a.length;s<i;++s){switch(typeof a[s].since){case"string":r=n(a[s].since).startOf("day"),a[s].since=r.valueOf()}switch(typeof a[s].until){case"undefined":a[s].until=1/0;break;case"string":r=n(a[s].until).startOf("day").valueOf(),a[s].until=r.valueOf()}}return a},Yn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s]}else if([r,a,o].indexOf(e)>=0)return u[s]},Yn.erasConvertYear=function(e,t){var s=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*s},Yn.erasAbbrRegex=function(e){return r(this,"_erasAbbrRegex")||mn.call(this),e?this._erasAbbrRegex:this._erasRegex},Yn.erasNameRegex=function(e){return r(this,"_erasNameRegex")||mn.call(this),e?this._erasNameRegex:this._erasRegex},Yn.erasNarrowRegex=function(e){return r(this,"_erasNarrowRegex")||mn.call(this),e?this._erasNarrowRegex:this._erasRegex},Yn.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Re).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone},Yn.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Re.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Yn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=c([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=pe.call(this._shortMonthsParse,a))?i:null:-1!==(i=pe.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=pe.call(this._shortMonthsParse,a))?i:-1!==(i=pe.call(this._longMonthsParse,a))?i:null:-1!==(i=pe.call(this._longMonthsParse,a))?i:-1!==(i=pe.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=c([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},Yn.monthsRegex=function(e){return this._monthsParseExact?(r(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=Ce),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Yn.monthsShortRegex=function(e){return this._monthsParseExact?(r(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=We),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Yn.week=function(e){return je(e,this._week.dow,this._week.doy).week},Yn.firstDayOfYear=function(){return this._week.doy},Yn.firstDayOfWeek=function(){return this._week.dow},Yn.weekdays=function(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ze(n,this._week.dow):e?n[e.day()]:n},Yn.weekdaysMin=function(e){return!0===e?Ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Yn.weekdaysShort=function(e){return!0===e?Ze(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Yn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=c([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=pe.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=c([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},Yn.weekdaysRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=Be),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Yn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Yn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Yn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Yn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ht("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Z(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=M("moment.lang is deprecated. Use moment.locale instead.",ht),n.langData=M("moment.langData is deprecated. Use moment.localeData instead.",ct);var Tn=Math.abs;function Nn(e,t,n,s){var i=zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function Pn(e){return e<0?Math.floor(e):Math.ceil(e)}function Rn(e){return 4800*e/146097}function Wn(e){return 146097*e/4800}function Cn(e){return function(){return this.as(e)}}var Un=Cn("ms"),Hn=Cn("s"),Fn=Cn("m"),Ln=Cn("h"),Vn=Cn("d"),Gn=Cn("w"),En=Cn("M"),An=Cn("Q"),jn=Cn("y");function In(e){return function(){return this.isValid()?this._data[e]:NaN}}var Zn=In("milliseconds"),zn=In("seconds"),$n=In("minutes"),qn=In("hours"),Bn=In("days"),Jn=In("months"),Qn=In("years");var Xn=Math.round,Kn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};var es=Math.abs;function ts(e){return(e>0)-(e<0)||+e}function ns(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,u=es(this._milliseconds)/1e3,l=es(this._days),h=es(this._months),d=this.asSeconds();return d?(e=I(u/60),t=I(e/60),u%=60,e%=60,n=I(h/12),h%=12,s=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=ts(this._months)!==ts(d)?"-":"",a=ts(this._days)!==ts(d)?"-":"",o=ts(this._milliseconds)!==ts(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(h?r+h+"M":"")+(l?a+l+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+s+"S":"")):"P0D"}var ss=Ut.prototype;return ss.isValid=function(){return this._isValid},ss.abs=function(){var e=this._data;return this._milliseconds=Tn(this._milliseconds),this._days=Tn(this._days),this._months=Tn(this._months),e.milliseconds=Tn(e.milliseconds),e.seconds=Tn(e.seconds),e.minutes=Tn(e.minutes),e.hours=Tn(e.hours),e.months=Tn(e.months),e.years=Tn(e.years),this},ss.add=function(e,t){return Nn(this,e,t,1)},ss.subtract=function(e,t){return Nn(this,e,t,-1)},ss.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+Rn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Wn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},ss.asMilliseconds=Un,ss.asSeconds=Hn,ss.asMinutes=Fn,ss.asHours=Ln,ss.asDays=Vn,ss.asWeeks=Gn,ss.asMonths=En,ss.asQuarters=An,ss.asYears=jn,ss.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Z(this._months/12):NaN},ss._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return r>=0&&a>=0&&o>=0||r<=0&&a<=0&&o<=0||(r+=864e5*Pn(Wn(o)+a),a=0,o=0),u.milliseconds=r%1e3,e=I(r/1e3),u.seconds=e%60,t=I(e/60),u.minutes=t%60,n=I(t/60),u.hours=n%24,a+=I(n/24),o+=i=I(Rn(a)),a-=Pn(Wn(i)),s=I(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},ss.clone=function(){return zt(this)},ss.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},ss.milliseconds=Zn,ss.seconds=zn,ss.minutes=$n,ss.hours=qn,ss.days=Bn,ss.weeks=function(){return I(this.days()/7)},ss.months=Jn,ss.years=Qn,ss.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=Kn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(r=Object.assign({},Kn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),s=function(e,t,n,s){var i=zt(e).abs(),r=Xn(i.as("s")),a=Xn(i.as("m")),o=Xn(i.as("h")),u=Xn(i.as("d")),l=Xn(i.as("M")),h=Xn(i.as("w")),d=Xn(i.as("y")),c=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(c=c||h<=1&&["w"]||h<n.w&&["ww",h]),(c=c||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,c[3]=+e>0,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}(this,!i,r,n=this.localeData()),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},ss.toISOString=ns,ss.toString=ns,ss.toJSON=ns,ss.locale=nn,ss.localeData=rn,ss.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ns),ss.lang=sn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),ce("x",ue),ce("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),ye("x",function(e,t,n){n._d=new Date(Z(e))}),n.version="2.29.1",e=Nt,n.fn=Dn,n.min=function(){return Wt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Wt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=c,n.unix=function(e){return Nt(1e3*e)},n.months=function(e,t){return bn(e,t,"months")},n.isDate=l,n.locale=ht,n.invalid=_,n.duration=zt,n.isMoment=v,n.weekdays=function(e,t,n){return xn(e,t,n,"weekdays")},n.parseZone=function(){return Nt.apply(null,arguments).parseZone()},n.localeData=ct,n.isDuration=Ht,n.monthsShort=function(e,t){return bn(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return xn(e,t,n,"weekdaysMin")},n.defineLocale=dt,n.updateLocale=function(e,t){if(null!=t){var n,s,i=it;null!=rt[e]&&null!=rt[e].parentLocale?rt[e].set(b(rt[e]._config,t)):(null!=(s=lt(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=rt[e],rt[e]=n),ht(e)}else null!=rt[e]&&(null!=rt[e].parentLocale?(rt[e]=rt[e].parentLocale,e===ht()&&ht(e)):null!=rt[e]&&delete rt[e]);return rt[e]},n.locales=function(){return D(rt)},n.weekdaysShort=function(e,t,n){return xn(e,t,n,"weekdaysShort")},n.normalizeUnits=V,n.relativeTimeRounding=function(e){return void 0===e?Xn:"function"==typeof e&&(Xn=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Kn[e]&&(void 0===t?Kn[e]:(Kn[e]=t,"s"===e&&(Kn.ss=t-1),!0))},n.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=Dn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n});

},{}],28:[function(require,module,exports){
(function (Buffer){(function (){
var api={};module.exports=api;var _reverseAlphabets={};function _encodeWithByteBuffer(r,e){var t=0,n=e.length,o=e.charAt(0),a=[0];for(t=0;t<r.length();++t){for(var f=0,h=r.at(t);f<a.length;++f)h+=a[f]<<8,a[f]=h%n,h=h/n|0;for(;h>0;)a.push(h%n),h=h/n|0}var i="";for(t=0;0===r.at(t)&&t<r.length()-1;++t)i+=o;for(t=a.length-1;t>=0;--t)i+=e[a[t]];return i}api.encode=function(r,e,t){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==t&&"number"!=typeof t)throw new TypeError('"maxline" must be a number.');var n="";if(r instanceof Uint8Array){var o=0,a=e.length,f=e.charAt(0),h=[0];for(o=0;o<r.length;++o){for(var i=0,p=r[o];i<h.length;++i)p+=h[i]<<8,h[i]=p%a,p=p/a|0;for(;p>0;)h.push(p%a),p=p/a|0}for(o=0;0===r[o]&&o<r.length-1;++o)n+=f;for(o=h.length-1;o>=0;--o)n+=e[h[o]]}else n=_encodeWithByteBuffer(r,e);if(t){var s=new RegExp(".{1,"+t+"}","g");n=n.match(s).join("\r\n")}return n},api.decode=function(r,e){if("string"!=typeof r)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var t=_reverseAlphabets[e];if(!t){t=_reverseAlphabets[e]=[];for(var n=0;n<e.length;++n)t[e.charCodeAt(n)]=n}r=r.replace(/\s/g,"");var o=e.length,a=e.charAt(0),f=[0];for(n=0;n<r.length;n++){var h=t[r.charCodeAt(n)];if(void 0===h)return;for(var i=0,p=h;i<f.length;++i)p+=f[i]*o,f[i]=255&p,p>>=8;for(;p>0;)f.push(255&p),p>>=8}for(var s=0;r[s]===a&&s<r.length-1;++s)f.push(0);return"undefined"!=typeof Buffer?Buffer.from(f.reverse()):new Uint8Array(f.reverse())};

}).call(this)}).call(this,require("buffer").Buffer)
},{"buffer":1}],29:[function(require,module,exports){
module.exports={options:{usePureJavaScript:!1}};

},{}],30:[function(require,module,exports){
var forge=require("./forge");module.exports=forge.md=forge.md||{},forge.md.algorithms=forge.md.algorithms||{};

},{"./forge":29}],31:[function(require,module,exports){
var forge=require("./forge");require("./md"),require("./util");var sha1=module.exports=forge.sha1=forge.sha1||{};forge.md.sha1=forge.md.algorithms.sha1=sha1,sha1.create=function(){_initialized||_init();var e=null,t=forge.util.createBuffer(),h=new Array(80),g={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var h=g.messageLengthSize/4,r=0;r<h;++r)g.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},g}};return g.start(),g.update=function(r,n){"utf8"===n&&(r=forge.util.encodeUtf8(r));var a=r.length;g.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=g.fullMessageLength.length-1;s>=0;--s)g.fullMessageLength[s]+=a[1],a[1]=a[0]+(g.fullMessageLength[s]/4294967296>>>0),g.fullMessageLength[s]=g.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(r),_update(e,h,t),(t.read>2048||0===t.length())&&t.compact(),g},g.digest=function(){var r=forge.util.createBuffer();r.putBytes(t.bytes());var n,a=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize&g.blockLength-1;r.putBytes(_padding.substr(0,g.blockLength-a));for(var s=8*g.fullMessageLength[0],u=0;u<g.fullMessageLength.length-1;++u)s+=(n=8*g.fullMessageLength[u+1])/4294967296>>>0,r.putInt32(s>>>0),s=n>>>0;r.putInt32(s);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};_update(l,h,r);var f=forge.util.createBuffer();return f.putInt32(l.h0),f.putInt32(l.h1),f.putInt32(l.h2),f.putInt32(l.h3),f.putInt32(l.h4),f},g};var _padding=null,_initialized=!1;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),64),_initialized=!0}function _update(e,t,h){for(var g,r,n,a,s,u,l,f=h.length();f>=64;){for(r=e.h0,n=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)g=h.getInt32(),t[l]=g,g=(r<<5|r>>>27)+(s^n&(a^s))+u+1518500249+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<20;++l)g=(g=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|g>>>31,t[l]=g,g=(r<<5|r>>>27)+(s^n&(a^s))+u+1518500249+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<32;++l)g=(g=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|g>>>31,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+1859775393+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<40;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+1859775393+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<60;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n&a|s&(n^a))+u+2400959708+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;for(;l<80;++l)g=(g=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|g>>>30,t[l]=g,g=(r<<5|r>>>27)+(n^a^s)+u+3395469782+g,u=s,s=a,a=(n<<30|n>>>2)>>>0,n=r,r=g;e.h0=e.h0+r|0,e.h1=e.h1+n|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}}

},{"./forge":29,"./md":30,"./util":33}],32:[function(require,module,exports){
var forge=require("./forge");require("./md"),require("./util");var sha256=module.exports=forge.sha256=forge.sha256||{};forge.md.sha256=forge.md.algorithms.sha256=sha256,sha256.create=function(){_initialized||_init();var e=null,t=forge.util.createBuffer(),h=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var h=n.messageLengthSize/4,g=0;g<h;++g)n.fullMessageLength.push(0);return t=forge.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(g,r){"utf8"===r&&(g=forge.util.encodeUtf8(g));var a=g.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=n.fullMessageLength.length-1;u>=0;--u)n.fullMessageLength[u]+=a[1],a[1]=a[0]+(n.fullMessageLength[u]/4294967296>>>0),n.fullMessageLength[u]=n.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(g),_update(e,h,t),(t.read>2048||0===t.length())&&t.compact(),n},n.digest=function(){var g=forge.util.createBuffer();g.putBytes(t.bytes());var r,a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;g.putBytes(_padding.substr(0,n.blockLength-a));for(var u=8*n.fullMessageLength[0],s=0;s<n.fullMessageLength.length-1;++s)u+=(r=8*n.fullMessageLength[s+1])/4294967296>>>0,g.putInt32(u>>>0),u=r>>>0;g.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};_update(l,h,g);var f=forge.util.createBuffer();return f.putInt32(l.h0),f.putInt32(l.h1),f.putInt32(l.h2),f.putInt32(l.h3),f.putInt32(l.h4),f.putInt32(l.h5),f.putInt32(l.h6),f.putInt32(l.h7),f},n};var _padding=null,_initialized=!1,_k=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),64),_k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized=!0}function _update(e,t,h){for(var n,g,r,a,u,s,l,f,i,o,d,p,L,c=h.length();c>=64;){for(u=0;u<16;++u)t[u]=h.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,g=((g=t[u-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,t[u]=n+t[u-7]+g+t[u-16]|0;for(s=e.h0,l=e.h1,f=e.h2,i=e.h3,o=e.h4,d=e.h5,p=e.h6,L=e.h7,u=0;u<64;++u)r=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),a=s&l|f&(s^l),n=L+((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(p^o&(d^p))+_k[u]+t[u],L=p,p=d,d=o,o=i+n>>>0,i=f,f=l,l=s,s=n+(g=r+a)>>>0;e.h0=e.h0+s|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+i|0,e.h4=e.h4+o|0,e.h5=e.h5+d|0,e.h6=e.h6+p|0,e.h7=e.h7+L|0,c-=64}}

},{"./forge":29,"./md":30,"./util":33}],33:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,setImmediate){(function (){
var forge=require("./forge"),baseN=require("./baseN"),util=module.exports=forge.util=forge.util||{};function _checkBitsParam(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function ByteStringBuffer(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(util.isArrayBuffer(t)||util.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof ByteStringBuffer||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return util.nextTick=process.nextTick,void("function"==typeof setImmediate?util.setImmediate=setImmediate:util.setImmediate=util.nextTick);if("function"==typeof setImmediate)return util.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(util.nextTick=function(t){return setImmediate(t)});if(util.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];util.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===t){r.stopPropagation();var i=e.slice();e.length=0,i.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),i=!0,n=document.createElement("div");e=[];new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(n,{attributes:!0});var a=util.setImmediate;util.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(e.push(t),1===e.length&&n.setAttribute("a",i=!i))}}util.nextTick=util.setImmediate}(),util.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,util.globalScope=util.isNodejs?global:"undefined"==typeof self?window:self,util.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},util.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},util.isArrayBufferView=function(t){return t&&util.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},util.ByteBuffer=ByteStringBuffer,util.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;function DataBuffer(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=util.isArrayBuffer(t),i=util.isArrayBufferView(t);if(r||i)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}util.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)},util.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},util.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},util.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},util.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},util.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},util.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util.encodeUtf8(t))},util.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},util.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},util.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},util.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},util.ByteStringBuffer.prototype.putInt=function(t,e){_checkBitsParam(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},util.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},util.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},util.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},util.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},util.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},util.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},util.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},util.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},util.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},util.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},util.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},util.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},util.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},util.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},util.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},util.ByteStringBuffer.prototype.copy=function(){var t=util.createBuffer(this.data);return t.read=this.read,t},util.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},util.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},util.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},util.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},util.ByteStringBuffer.prototype.toString=function(){return util.decodeUtf8(this.bytes())},util.DataBuffer=DataBuffer,util.DataBuffer.prototype.length=function(){return this.write-this.read},util.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},util.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this},util.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},util.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},util.DataBuffer.prototype.putBytes=function(t,e){if(util.isArrayBufferView(t)){var r=(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-i.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=r,this}if(util.isArrayBuffer(t)){var i=new Uint8Array(t);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(t instanceof util.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&util.isArrayBufferView(t.data)){i=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(i.byteLength),new Uint8Array(t.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(t instanceof util.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var n;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.hex.decode(t,n,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.base64.decode(t,n,this.write),this;if("utf8"===e&&(t=util.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),n=new Uint8Array(this.data.buffer,this.write),this.write+=util.binary.raw.decode(n),this;if("utf16"===e)return this.accommodate(2*t.length),n=new Uint16Array(this.data.buffer,this.write),this.write+=util.text.utf16.encode(n),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},util.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},util.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},util.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},util.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},util.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},util.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},util.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},util.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},util.DataBuffer.prototype.putInt=function(t,e){_checkBitsParam(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},util.DataBuffer.prototype.putSignedInt=function(t,e){return _checkBitsParam(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},util.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},util.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},util.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},util.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},util.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},util.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},util.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},util.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},util.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},util.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},util.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},util.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},util.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},util.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},util.DataBuffer.prototype.copy=function(){return new util.DataBuffer(this)},util.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},util.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},util.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},util.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},util.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return util.binary.raw.encode(e);if("hex"===t)return util.binary.hex.encode(e);if("base64"===t)return util.binary.base64.encode(e);if("utf8"===t)return util.text.utf8.decode(e);if("utf16"===t)return util.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},util.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=util.encodeUtf8(t)),new util.ByteBuffer(t)},util.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},util.xorBytes=function(t,e,r){for(var i="",n="",a="",u=0,o=0;r>0;--r,++u)n=t.charCodeAt(u)^e.charCodeAt(u),o>=10&&(i+=a,a="",o=0),a+=String.fromCharCode(n),++o;return i+=a},util.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},util.bytesToHex=function(t){return util.createBuffer(t).toHex()},util.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util.encode64=function(t,e){for(var r,i,n,a="",u="",o=0;o<t.length;)r=t.charCodeAt(o++),i=t.charCodeAt(o++),n=t.charCodeAt(o++),a+=_base64.charAt(r>>2),a+=_base64.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=_base64.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":_base64.charAt(63&n)),e&&a.length>e&&(u+=a.substr(0,e)+"\r\n",a=a.substr(e));return u+=a},util.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,i,n,a="",u=0;u<t.length;)e=_base64Idx[t.charCodeAt(u++)-43],r=_base64Idx[t.charCodeAt(u++)-43],i=_base64Idx[t.charCodeAt(u++)-43],n=_base64Idx[t.charCodeAt(u++)-43],a+=String.fromCharCode(e<<2|r>>4),64!==i&&(a+=String.fromCharCode((15&r)<<4|i>>2),64!==n&&(a+=String.fromCharCode((3&i)<<6|n)));return a},util.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},util.decodeUtf8=function(t){return decodeURIComponent(escape(t))},util.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}},util.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},util.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},util.binary.hex.encode=util.bytesToHex,util.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2)));var n=0,a=r=r||0;for(1&t.length&&(n=1,i[a++]=parseInt(t[0],16));n<t.length;n+=2)i[a++]=parseInt(t.substr(n,2),16);return e?a-r:i},util.binary.base64.encode=function(t,e){for(var r,i,n,a="",u="",o=0;o<t.byteLength;)r=t[o++],i=t[o++],n=t[o++],a+=_base64.charAt(r>>2),a+=_base64.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=_base64.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":_base64.charAt(63&n)),e&&a.length>e&&(u+=a.substr(0,e)+"\r\n",a=a.substr(e));return u+=a},util.binary.base64.decode=function(t,e,r){var i,n,a,u,o=e;o||(o=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var s=0,f=r=r||0;s<t.length;)i=_base64Idx[t.charCodeAt(s++)-43],n=_base64Idx[t.charCodeAt(s++)-43],a=_base64Idx[t.charCodeAt(s++)-43],u=_base64Idx[t.charCodeAt(s++)-43],o[f++]=i<<2|n>>4,64!==a&&(o[f++]=(15&n)<<4|a>>2,64!==u&&(o[f++]=(3&a)<<6|u));return e?f-r:o.subarray(0,f)},util.binary.base58.encode=function(t,e){return util.binary.baseN.encode(t,_base58,e)},util.binary.base58.decode=function(t,e){return util.binary.baseN.decode(t,_base58,e)},util.text={utf8:{},utf16:{}},util.text.utf8.encode=function(t,e,r){t=util.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},util.text.utf8.decode=function(t){return util.decodeUtf8(String.fromCharCode.apply(null,t))},util.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(2*t.length));for(var n=new Uint16Array(i.buffer),a=r=r||0,u=r,o=0;o<t.length;++o)n[u++]=t.charCodeAt(o),a+=2;return e?a-r:i},util.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},util.deflate=function(t,e,r){if(e=util.decode64(t.deflate(util.encode64(e)).rval),r){var i=2;32&e.charCodeAt(1)&&(i=6),e=e.substring(i,e.length-4)}return e},util.inflate=function(t,e,r){var i=t.inflate(util.encode64(e)).rval;return null===i?null:util.decode64(i)};var _setStorageObject=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(null===r?i=t.removeItem(e):(r=util.encode64(JSON.stringify(r)),i=t.setItem(e,r)),void 0!==i&&!0!==i.rval){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},_getStorageObject=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(util.decode64(r))),r},_setItem=function(t,e,r,i){var n=_getStorageObject(t,e);null===n&&(n={}),n[r]=i,_setStorageObject(t,e,n)},_getItem=function(t,e,r){var i=_getStorageObject(t,e);return null!==i&&(i=r in i?i[r]:null),i},_removeItem=function(t,e,r){var i=_getStorageObject(t,e);if(null!==i&&r in i){delete i[r];var n=!0;for(var a in i){n=!1;break}n&&(i=null),_setStorageObject(t,e,i)}},_clearItems=function(t,e){_setStorageObject(t,e,null)},_callStorageFunction=function(t,e,r){var i,n=null;void 0===r&&(r=["web","flash"]);var a=!1,u=null;for(var o in r){i=r[o];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),a="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(t){u=t}if(a)break}if(!a)throw u;return n};util.setItem=function(t,e,r,i,n){_callStorageFunction(_setItem,arguments,n)},util.getItem=function(t,e,r,i){return _callStorageFunction(_getItem,arguments,i)},util.removeItem=function(t,e,r,i){_callStorageFunction(_removeItem,arguments,i)},util.clearItems=function(t,e,r){_callStorageFunction(_clearItems,arguments,r)},util.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?80!==i.port&&"http"===i.scheme?i.fullHost+=":"+i.port:443!==i.port&&"https"===i.scheme&&(i.fullHost+=":"+i.port):"http"===i.scheme?i.port=80:"https"===i.scheme&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var _queryVariables=null;util.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),i=0;i<r.length;i++){var n,a,u=r[i].indexOf("=");u>0?(n=r[i].substring(0,u),a=r[i].substring(u+1)):(n=r[i],a=null),n in e||(e[n]=[]),n in Object.prototype||null===a||e[n].push(unescape(a))}return e};return void 0===t?(null===_queryVariables&&(_queryVariables="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=_queryVariables):e=r(t),e},util.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");return n.length>0&&""===n[0]&&n.shift(),{pathString:e,queryString:r,path:n,query:""===r?{}:util.getQueryVariables(r)}},util.makeRequest=function(t){var e=util.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,r){var i;return void 0===t?i=e.query:(i=e.query[t])&&void 0!==r&&(i=i[r]),i},getQueryLast:function(t,e){var i=r.getQuery(t);return i?i[i.length-1]:e}};return r},util.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")},util.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},util.format=function(t){for(var e,r,i=/%./g,n=0,a=[],u=0;e=i.exec(t);){(r=t.substring(u,i.lastIndex-2)).length>0&&a.push(r),u=i.lastIndex;var o=e[0][1];switch(o){case"s":case"o":n<arguments.length?a.push(arguments[1+n++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(t.substring(u)),a.join("")},util.formatNumber=function(t,e,r,i){var n=t,a=isNaN(e=Math.abs(e))?2:e,u=void 0===r?",":r,o=void 0===i?".":i,s=n<0?"-":"",f=parseInt(n=Math.abs(+n||0).toFixed(a),10)+"",h=f.length>3?f.length%3:0;return s+(h?f.substr(0,h)+o:"")+f.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?u+Math.abs(n-f).toFixed(a).slice(2):"")},util.formatSize=function(t){return t=t>=1073741824?util.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?util.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?util.formatNumber(t/1024,0)+" KiB":util.formatNumber(t,0)+" bytes"},util.bytesFromIP=function(t){return-1!==t.indexOf(".")?util.bytesFromIPv4(t):-1!==t.indexOf(":")?util.bytesFromIPv6(t):null},util.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=util.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()},util.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),i=util.createBuffer(),n=0;n<8;++n)if(t[n]&&0!==t[n].length){var a=util.hexToBytes(t[n]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,r),r=0;return i.getBytes()},util.bytesToIP=function(t){return 4===t.length?util.bytesToIPv4(t):16===t.length?util.bytesToIPv6(t):null},util.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},util.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var a=util.bytesToHex(t[n]+t[n+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var u=r[r.length-1],o=e.length;u&&o===u.end+1?(u.end=o,u.end-u.start>r[i].end-r[i].start&&(i=r.length-1)):r.push({start:o,end:o})}e.push(a)}if(r.length>0){var s=r[i];s.end-s.start>0&&(e.splice(s.start,s.end-s.start+1,""),0===s.start&&e.unshift(""),7===s.end&&e.push(""))}return e.join(":")},util.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in util&&!t.update)return e(null,util.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util.cores=navigator.hardwareConcurrency,e(null,util.cores);if("undefined"==typeof Worker)return util.cores=1,e(null,util.cores);if("undefined"==typeof Blob)return util.cores=2,e(null,util.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(i,n,a){if(0===n){var u=Math.floor(i.reduce(function(t,e){return t+e},0)/i.length);return util.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,util.cores)}!function(t,e){for(var i=[],n=[],a=0;a<t;++a){var u=new Worker(r);u.addEventListener("message",function(r){if(n.push(r.data),n.length===t){for(var a=0;a<t;++a)i[a].terminate();e(null,n)}}),i.push(u)}for(var a=0;a<t;++a)i[a].postMessage(a)}(a,function(e,r){i.push(function(t,e){for(var r=[],i=0;i<t;++i)for(var n=e[i],a=r[i]=[],u=0;u<t;++u)if(i!==u){var o=e[u];(n.st>o.st&&n.st<o.et||o.st>n.st&&o.st<n.et)&&a.push(u)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(i,n-1,a)})}([],5,16)};

}).call(this)}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],require("timers").setImmediate)
},{"./baseN":28,"./forge":29,"_process":34,"buffer":1,"timers":46}],34:[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],35:[function(require,module,exports){
"use strict";const util=require("./util");module.exports=class{constructor({maxCallStackDepth:t=500,maxTotalCallStackDepth:e=4294967295,timeSlice:i=10}={}){this.schedule={},this.schedule.MAX_DEPTH=t,this.schedule.MAX_TOTAL_DEPTH=e,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=i}doWork(t,e){const i=this.schedule;if(i.totalDepth>=i.MAX_TOTAL_DEPTH)return e(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function n(){if(i.depth===i.MAX_DEPTH)return i.depth=0,i.running=!1,util.nextTick(n);const l=Date.now();if(i.running||(i.start=Date.now(),i.deadline=i.start+i.timeSlice),l<i.deadline)return i.running=!0,i.depth++,i.totalDepth++,t((t,n)=>{i.depth--,i.totalDepth--,e(t,n)});i.depth=0,i.running=!1,util.setImmediate(n)}()}forEach(t,e,i){const n=this;let l,o,s=0;if(Array.isArray(t))o=t.length,l=(()=>s!==o&&(l.value=t[s++],l.key=s,!0));else{const e=Object.keys(t);o=e.length,l=(()=>s!==o&&(l.key=e[s++],l.value=t[l.key],!0))}!function t(o){return o?i(o):l()?n.doWork(()=>e(l.value,l.key,t)):void i()}()}waterfall(t,e){const i=this;i.forEach(t,(t,e,n)=>i.doWork(t,n),e)}whilst(t,e,i){const n=this;!function l(o){return o?i(o):t()?void n.doWork(e,l):i()}()}};

},{"./util":45}],36:[function(require,module,exports){
"use strict";const util=require("./util");module.exports=class t{constructor(t){this.prefix=t,this.counter=0,this.existing={}}clone(){const i=new t(this.prefix);return i.counter=this.counter,i.existing=util.clone(this.existing),i}getId(t){if(t&&t in this.existing)return this.existing[t];const i=this.prefix+this.counter;return this.counter+=1,t&&(this.existing[t]=i),i}hasId(t){return t in this.existing}};

},{"./util":45}],37:[function(require,module,exports){
"use strict";const forge=require("node-forge/lib/forge");require("node-forge/lib/md"),require("node-forge/lib/sha1"),require("node-forge/lib/sha256"),module.exports=class{constructor(e){this.md=forge.md[e].create()}update(e){this.md.update(e,"utf8")}digest(){return this.md.digest().toHex()}};

},{"node-forge/lib/forge":29,"node-forge/lib/md":30,"node-forge/lib/sha1":31,"node-forge/lib/sha256":32}],38:[function(require,module,exports){
"use strict";const TERMS=["subject","predicate","object","graph"],RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING=RDF+"langString",XSD_STRING="http://www.w3.org/2001/XMLSchema#string",REGEX={};function _compareTriples(e,a){for(const t in e)if(e[t].termType!==a[t].termType||e[t].value!==a[t].value)return!1;return"Literal"!==e.object.termType||e.object.datatype.termType===a.object.datatype.termType&&e.object.datatype.value===a.object.datatype.value&&e.object.language===a.object.language}REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^[ \\t]*$"),REGEX.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]*\\.))[ \\t]*$'),module.exports=class e{static parse(e){const a=[],t={},r=e.split(REGEX.eoln);let n=0;for(const e of r){if(n++,REGEX.empty.test(e))continue;const r=e.match(REGEX.quad);if(null===r)throw new Error("N-Quads parse error on line "+n+".");const o={};if(void 0!==r[1]?o.subject={termType:"NamedNode",value:r[1]}:o.subject={termType:"BlankNode",value:r[2]},o.predicate={termType:"NamedNode",value:r[3]},void 0!==r[4]?o.object={termType:"NamedNode",value:r[4]}:void 0!==r[5]?o.object={termType:"BlankNode",value:r[5]}:(o.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==r[7]?o.object.datatype.value=r[7]:void 0!==r[8]?(o.object.datatype.value=RDF_LANGSTRING,o.object.language=r[8]):o.object.datatype.value=XSD_STRING,o.object.value=_unescape(r[6])),void 0!==r[9]?o.graph={termType:"NamedNode",value:r[9]}:void 0!==r[10]?o.graph={termType:"BlankNode",value:r[10]}:o.graph={termType:"DefaultGraph",value:""},o.graph.value in t){let e=!0;const r=t[o.graph.value];for(const a of r)if(_compareTriples(a,o)){e=!1;break}e&&(r.push(o),a.push(o))}else t[o.graph.value]=[o],a.push(o)}return a}static serialize(a){Array.isArray(a)||(a=e.legacyDatasetToQuads(a));const t=[];for(const r of a)t.push(e.serializeQuad(r));return t.sort().join("")}static serializeQuad(e){const a=e.subject,t=e.predicate,r=e.object,n=e.graph;let o="";return[a,t].forEach(e=>{"NamedNode"===e.termType?o+="<"+e.value+">":o+=e.value,o+=" "}),"NamedNode"===r.termType?o+="<"+r.value+">":"BlankNode"===r.termType?o+=r.value:(o+='"'+_escape(r.value)+'"',r.datatype.value===RDF_LANGSTRING?r.language&&(o+="@"+r.language):r.datatype.value!==XSD_STRING&&(o+="^^<"+r.datatype.value+">")),"NamedNode"===n.termType?o+=" <"+n.value+">":"BlankNode"===n.termType&&(o+=" "+n.value),o+=" .\n"}static legacyDatasetToQuads(e){const a=[],t={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const r in e){e[r].forEach(e=>{const n={};for(const a in e){const r=e[a],o={termType:t[r.type],value:r.value};"Literal"===o.termType&&(o.datatype={termType:"NamedNode"},"datatype"in r&&(o.datatype.value=r.datatype),"language"in r?("datatype"in r||(o.datatype.value=RDF_LANGSTRING),o.language=r.language):"datatype"in r||(o.datatype.value=XSD_STRING)),n[a]=o}n.graph="@default"===r?{termType:"DefaultGraph",value:""}:{termType:r.startsWith("_:")?"BlankNode":"NamedNode",value:r},a.push(n)})}return a}};const _escapeRegex=/["\\\n\r]/g;function _escape(e){return e.replace(_escapeRegex,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(e){return e.replace(_unescapeRegex,function(e,a,t,r){if(a)switch(a){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(t)return String.fromCharCode(parseInt(t,16));if(r)throw new Error("Unsupported U escape")})}

},{}],39:[function(require,module,exports){
"use strict";module.exports=class{constructor(t){this.list=t.sort(),this.done=!1,this.left={};for(let s=0;s<t.length;++s)this.left[t[s]]=!0}hasNext(){return!this.done}next(){const t=this.list.slice();let s=null,i=0;const l=this.list.length;for(let t=0;t<l;++t){const e=this.list[t],h=this.left[e];(null===s||e>s)&&(h&&t>0&&e>this.list[t-1]||!h&&t<l-1&&e>this.list[t+1])&&(s=e,i=t)}if(null===s)this.done=!0;else{const t=this.left[s]?i-1:i+1;this.list[i]=this.list[t],this.list[t]=s;for(let t=0;t<l;++t)this.list[t]>s&&(this.left[this.list[t]]=!this.left[this.list[t]])}return t}};

},{}],40:[function(require,module,exports){
"use strict";const AsyncAlgorithm=require("./AsyncAlgorithm"),IdentifierIssuer=require("./IdentifierIssuer"),MessageDigest=require("./MessageDigest"),Permutator=require("./Permutator"),NQuads=require("./NQuads"),util=require("./util"),POSITIONS={subject:"s",object:"o",graph:"g"};module.exports=class extends AsyncAlgorithm{constructor(e){super(e=e||{}),this.name="URDNA2015",this.options=Object.assign({},e),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e,s){const a=this;let t;a.schedule.start=Date.now(),a.quads=e;const r={};a.waterfall([s=>{a.forEach(e,(e,s,t)=>{a.forEachComponent(e,s=>{if("BlankNode"!==s.termType)return;const t=s.value;t in a.blankNodeInfo?a.blankNodeInfo[t].quads.push(e):(r[t]=!0,a.blankNodeInfo[t]={quads:[e]})}),t()},s)},e=>{let s=!0;a.whilst(()=>s,e=>{s=!1,a.hashToBlankNodes={},a.waterfall([e=>{a.forEach(r,(e,s,t)=>{a.hashFirstDegreeQuads(s,(e,r)=>{if(e)return t(e);r in a.hashToBlankNodes?a.hashToBlankNodes[r].push(s):a.hashToBlankNodes[r]=[s],t()})},e)},e=>{const t=Object.keys(a.hashToBlankNodes).sort();a.forEach(t,(e,t,n)=>{const o=a.hashToBlankNodes[e];if(o.length>1)return n();const h=o[0];a.canonicalIssuer.getId(h),delete r[h],delete a.hashToBlankNodes[e],s=!0,n()},e)}],e)},e)},e=>{const s=Object.keys(a.hashToBlankNodes).sort();a.forEach(s,(e,s,t)=>{const r=[],n=a.hashToBlankNodes[e];a.waterfall([e=>{a.forEach(n,(e,s,t)=>{if(a.canonicalIssuer.hasId(e))return t();const n=new IdentifierIssuer("_:b");n.getId(e),a.hashNDegreeQuads(e,n,(e,s)=>{if(e)return t(e);r.push(s),t()})},e)},e=>{r.sort((e,s)=>e.hash<s.hash?-1:e.hash>s.hash?1:0),a.forEach(r,(e,s,t)=>{for(const s in e.issuer.existing)a.canonicalIssuer.getId(s);t()},e)}],t)},e)},e=>{const s=[];a.waterfall([e=>{a.forEach(a.quads,(e,t,r)=>{a.forEachComponent(e,e=>{"BlankNode"!==e.termType||e.value.startsWith(a.canonicalIssuer.prefix)||(e.value=a.canonicalIssuer.getId(e.value))}),s.push(NQuads.serializeQuad(e)),r()},e)},e=>(s.sort(),t=s.join(""),e())],e)}],e=>s(e,t))}hashFirstDegreeQuads(e,s){const a=this,t=a.blankNodeInfo[e];if("hash"in t)return s(null,t.hash);const r=[],n=t.quads;a.forEach(n,(s,t,n)=>{const o={predicate:s.predicate};a.forEachComponent(s,(s,t)=>{o[t]=a.modifyFirstDegreeComponent(e,s,t)}),r.push(NQuads.serializeQuad(o)),n()},e=>{if(e)return s(e);r.sort();const n=new MessageDigest(a.hashAlgorithm);for(let e=0;e<r.length;++e)n.update(r[e]);t.hash=n.digest(),s(null,t.hash)})}hashRelatedBlankNode(e,s,a,t,r){const n=this;let o;n.waterfall([s=>n.canonicalIssuer.hasId(e)?(o=n.canonicalIssuer.getId(e),s()):a.hasId(e)?(o=a.getId(e),s()):void n.hashFirstDegreeQuads(e,(e,a)=>{if(e)return s(e);o=a,s()})],e=>{if(e)return r(e);const a=new MessageDigest(n.hashAlgorithm);return a.update(t),"g"!==t&&a.update(n.getRelatedPredicate(s)),a.update(o),r(null,a.digest())})}hashNDegreeQuads(e,s,a){const t=this;let r;const n=new MessageDigest(t.hashAlgorithm);t.waterfall([a=>t.createHashToRelated(e,s,(e,s)=>{if(e)return a(e);r=s,a()}),e=>{const a=Object.keys(r).sort();t.forEach(a,(e,a,o)=>{n.update(e);let h,i="";const l=new Permutator(r[e]);t.whilst(()=>l.hasNext(),e=>{const a=l.next();let r=s.clone(),n="";const o=[];t.waterfall([s=>{t.forEach(a,(s,a,h)=>{if(t.canonicalIssuer.hasId(s)?n+=t.canonicalIssuer.getId(s):(r.hasId(s)||o.push(s),n+=r.getId(s)),0!==i.length&&n>i)return e();h()},s)},s=>{t.forEach(o,(s,a,o)=>{t.hashNDegreeQuads(s,r,(a,t)=>a?o(a):(n+=r.getId(s),n+="<"+t.hash+">",r=t.issuer,0!==i.length&&n>i?e():void o()))},s)},e=>{(0===i.length||n<i)&&(i=n,h=r),e()}],e)},e=>{if(e)return o(e);n.update(i),s=h,o()})},e)}],e=>{a(e,{hash:n.digest(),issuer:s})})}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:((s=util.clone(s)).value=s.value===e?"_:a":"_:z",s)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,s,a){const t=this,r={},n=t.blankNodeInfo[e].quads;t.forEach(n,(a,n,o)=>{t.forEach(a,(n,o,h)=>{if("predicate"===o||"BlankNode"!==n.termType||n.value===e)return h();const i=n.value,l=POSITIONS[o];t.hashRelatedBlankNode(i,a,s,l,(e,s)=>{if(e)return h(e);s in r?r[s].push(i):r[s]=[i],h()})},o)},e=>a(e,r))}forEachComponent(e,s){for(const a in e)"predicate"!==a&&s(e[a],a,e)}};

},{"./AsyncAlgorithm":35,"./IdentifierIssuer":36,"./MessageDigest":37,"./NQuads":38,"./Permutator":39,"./util":45}],41:[function(require,module,exports){
"use strict";const IdentifierIssuer=require("./IdentifierIssuer"),MessageDigest=require("./MessageDigest"),Permutator=require("./Permutator"),NQuads=require("./NQuads"),util=require("./util"),POSITIONS={subject:"s",object:"o",graph:"g"};module.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new IdentifierIssuer("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e){const s=this;s.quads=e;const t={};for(const a of e)s.forEachComponent(a,e=>{if("BlankNode"!==e.termType)return;const n=e.value;n in s.blankNodeInfo?s.blankNodeInfo[n].quads.push(a):(t[n]=!0,s.blankNodeInfo[n]={quads:[a]})});let a=!0;for(;a;){a=!1,s.hashToBlankNodes={};for(const e in t){const t=s.hashFirstDegreeQuads(e);t in s.hashToBlankNodes?s.hashToBlankNodes[t].push(e):s.hashToBlankNodes[t]=[e]}const e=Object.keys(s.hashToBlankNodes).sort();for(let n=0;n<e.length;++n){const o=e[n],r=s.hashToBlankNodes[o];if(r.length>1)continue;const h=r[0];s.canonicalIssuer.getId(h),delete t[h],delete s.hashToBlankNodes[o],a=!0}}const n=Object.keys(s.hashToBlankNodes).sort();for(let e=0;e<n.length;++e){const t=[],a=n[e],o=s.hashToBlankNodes[a];for(let e=0;e<o.length;++e){const a=o[e];if(s.canonicalIssuer.hasId(a))continue;const n=new IdentifierIssuer("_:b");n.getId(a);const r=s.hashNDegreeQuads(a,n);t.push(r)}t.sort((e,s)=>e.hash<s.hash?-1:e.hash>s.hash?1:0);for(let e=0;e<t.length;++e){const a=t[e];for(const e in a.issuer.existing)s.canonicalIssuer.getId(e)}}const o=[];for(let e=0;e<s.quads.length;++e){const t=s.quads[e];s.forEachComponent(t,e=>{"BlankNode"!==e.termType||e.value.startsWith(s.canonicalIssuer.prefix)||(e.value=s.canonicalIssuer.getId(e.value))}),o.push(NQuads.serializeQuad(t))}return o.sort(),o.join("")}hashFirstDegreeQuads(e){const s=this,t=s.blankNodeInfo[e];if("hash"in t)return t.hash;const a=[],n=t.quads;for(let t=0;t<n.length;++t){const o=n[t],r={predicate:o.predicate};s.forEachComponent(o,(t,a)=>{r[a]=s.modifyFirstDegreeComponent(e,t,a)}),a.push(NQuads.serializeQuad(r))}a.sort();const o=new MessageDigest(s.hashAlgorithm);for(let e=0;e<a.length;++e)o.update(a[e]);return t.hash=o.digest(),t.hash}hashRelatedBlankNode(e,s,t,a){const n=this;let o;o=n.canonicalIssuer.hasId(e)?n.canonicalIssuer.getId(e):t.hasId(e)?t.getId(e):n.hashFirstDegreeQuads(e);const r=new MessageDigest(n.hashAlgorithm);return r.update(a),"g"!==a&&r.update(n.getRelatedPredicate(s)),r.update(o),r.digest()}hashNDegreeQuads(e,s){const t=this,a=new MessageDigest(t.hashAlgorithm),n=t.createHashToRelated(e,s),o=Object.keys(n).sort();for(let e=0;e<o.length;++e){const r=o[e];a.update(r);let h,i="";const l=new Permutator(n[r]);for(;l.hasNext();){const e=l.next();let a=s.clone(),n="";const o=[];let r=!1;for(let s=0;s<e.length;++s){const h=e[s];if(t.canonicalIssuer.hasId(h)?n+=t.canonicalIssuer.getId(h):(a.hasId(h)||o.push(h),n+=a.getId(h)),0!==i.length&&n>i){r=!0;break}}if(!r){for(let e=0;e<o.length;++e){const s=o[e],h=t.hashNDegreeQuads(s,a);if(n+=a.getId(s),n+="<"+h.hash+">",a=h.issuer,0!==i.length&&n>i){r=!0;break}}r||(0===i.length||n<i)&&(i=n,h=a)}}a.update(i),s=h}return{hash:a.digest(),issuer:s}}modifyFirstDegreeComponent(e,s){return"BlankNode"!==s.termType?s:((s=util.clone(s)).value=s.value===e?"_:a":"_:z",s)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,s){const t=this,a={},n=t.blankNodeInfo[e].quads;for(let o=0;o<n.length;++o){const r=n[o];for(const n in r){const o=r[n];if("predicate"===n||"BlankNode"!==o.termType||o.value===e)continue;const h=o.value,i=POSITIONS[n],l=t.hashRelatedBlankNode(h,r,s,i);l in a?a[l].push(h):a[l]=[h]}}return a}forEachComponent(e,s){for(const t in e)"predicate"!==t&&s(e[t],t,e)}};

},{"./IdentifierIssuer":36,"./MessageDigest":37,"./NQuads":38,"./Permutator":39,"./util":45}],42:[function(require,module,exports){
"use strict";const URDNA2015=require("./URDNA2015"),util=require("./util");module.exports=class extends URDNA2015{constructor(e){super(e),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:((t=util.clone(t)).value="name"===a?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t,a){const r=this,u={},l=r.blankNodeInfo[e].quads;r.forEach(l,(a,l,s)=>{let o,n;if("BlankNode"===a.subject.termType&&a.subject.value!==e)n=a.subject.value,o="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)return s();n=a.object.value,o="r"}r.hashRelatedBlankNode(n,a,t,o,(e,t)=>{if(e)return s(e);t in u?u[t].push(n):u[t]=[n],s()})},e=>a(e,u))}};

},{"./URDNA2015":40,"./util":45}],43:[function(require,module,exports){
"use strict";const URDNA2015Sync=require("./URDNA2015Sync"),util=require("./util");module.exports=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,a){return"BlankNode"!==t.termType?t:((t=util.clone(t)).value="name"===a?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const a=this,n={},l=a.blankNodeInfo[e].quads;for(let r=0;r<l.length;++r){const s=l[r];let o,u;if("BlankNode"===s.subject.termType&&s.subject.value!==e)u=s.subject.value,o="p";else{if("BlankNode"!==s.object.termType||s.object.value===e)continue;u=s.object.value,o="r"}const c=a.hashRelatedBlankNode(u,s,t,o);c in n?n[c].push(u):n[c]=[u]}return n}};

},{"./URDNA2015Sync":41,"./util":45}],44:[function(require,module,exports){
"use strict";const util=require("./util"),URDNA2015=require("./URDNA2015"),URGNA2012=require("./URGNA2012"),URDNA2015Sync=require("./URDNA2015Sync"),URGNA2012Sync=require("./URGNA2012Sync");let rdfCanonizeNative;try{rdfCanonizeNative=require("rdf-canonize-native")}catch(i){}const api={};module.exports=api,api.NQuads=require("./NQuads"),api.IdentifierIssuer=require("./IdentifierIssuer"),api._rdfCanonizeNative=function(i){return i&&(rdfCanonizeNative=i),rdfCanonizeNative},api.canonize=util.callbackify(async function(i,a){let e;const n=new Promise((i,a)=>{e=((e,n)=>{if(e)return a(e);i(n)})});if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(!rdfCanonizeNative)throw new Error("rdf-canonize-native not available");rdfCanonizeNative.canonize(i,a,e)}else if("URDNA2015"===a.algorithm)new URDNA2015(a).main(i,e);else{if("URGNA2012"!==a.algorithm)throw"algorithm"in a?new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new URGNA2012(a).main(i,e)}return n}),api.canonizeSync=function(i,a){if(Array.isArray(i)||(i=api.NQuads.legacyDatasetToQuads(i)),a.useNative){if(rdfCanonizeNative)return rdfCanonizeNative.canonizeSync(i,a);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===a.algorithm)return new URDNA2015Sync(a).main(i);if("URGNA2012"===a.algorithm)return new URGNA2012Sync(a).main(i);if(!("algorithm"in a))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+a.algorithm)};

},{"./IdentifierIssuer":36,"./NQuads":38,"./URDNA2015":40,"./URDNA2015Sync":41,"./URGNA2012":42,"./URGNA2012Sync":43,"./util":45,"rdf-canonize-native":1}],45:[function(require,module,exports){
(function (process,setImmediate){(function (){
"use strict";const api={};module.exports=api;const _setImmediate="function"==typeof setImmediate&&setImmediate,_delay=_setImmediate?e=>_setImmediate(e):e=>setTimeout(e,0);function _invokeCallback(e,t,i){try{return e(t,i)}catch(e){process.nextTick(()=>{throw e})}}"object"==typeof process&&"function"==typeof process.nextTick?api.nextTick=process.nextTick:api.nextTick=_delay,api.setImmediate=_setImmediate?_delay:api.nextTick,api.clone=function(e){if(e&&"object"==typeof e){let t;if(Array.isArray(e)){t=[];for(let i=0;i<e.length;++i)t[i]=api.clone(e[i])}else if(api.isObject(e)){t={};for(const i in e)t[i]=api.clone(e[i])}else t=e.toString();return t}return e},api.isObject=(e=>"[object Object]"===Object.prototype.toString.call(e)),api.isUndefined=(e=>void 0===e),api.callbackify=(e=>(async function(...t){const i=t[t.length-1];let n;"function"==typeof i&&t.pop();try{n=await e.apply(null,t)}catch(e){if("function"==typeof i)return _invokeCallback(i,e);throw e}return"function"==typeof i?_invokeCallback(i,null,n):n}));

}).call(this)}).call(this,require('_process'),require("timers").setImmediate)
},{"_process":34,"timers":46}],46:[function(require,module,exports){
(function (setImmediate,clearImmediate){(function (){
var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)
},{"process/browser.js":34,"timers":46}],47:[function(require,module,exports){
"use strict";module.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}};

},{}],48:[function(require,module,exports){
"use strict";function Yallist(t){var e=this;if(e instanceof Yallist||(e=new Yallist),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var l=0,i=arguments.length;l<i;l++)e.push(arguments[l]);return e}function insert(t,e,l){var i=e===t.head?new Node(l,null,e,t):new Node(l,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function push(t,e){t.tail=new Node(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,e,l,i){if(!(this instanceof Node))return new Node(t,e,l,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,l=t.prev;return e&&(e.prev=l),l&&(l.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,e){e=e||this;for(var l=this.head,i=0;null!==l;i++)t.call(e,l.value,i,this),l=l.next},Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var l=this.tail,i=this.length-1;null!==l;i--)t.call(e,l.value,i,this),l=l.prev},Yallist.prototype.get=function(t){for(var e=0,l=this.head;null!==l&&e<t;e++)l=l.next;if(e===t&&null!==l)return l.value},Yallist.prototype.getReverse=function(t){for(var e=0,l=this.tail;null!==l&&e<t;e++)l=l.prev;if(e===t&&null!==l)return l.value},Yallist.prototype.map=function(t,e){e=e||this;for(var l=new Yallist,i=this.head;null!==i;)l.push(t.call(e,i.value,this)),i=i.next;return l},Yallist.prototype.mapReverse=function(t,e){e=e||this;for(var l=new Yallist,i=this.tail;null!==i;)l.push(t.call(e,i.value,this)),i=i.prev;return l},Yallist.prototype.reduce=function(t,e){var l,i=this.head;if(arguments.length>1)l=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,l=this.head.value}for(var n=0;null!==i;n++)l=t(l,i.value,n),i=i.next;return l},Yallist.prototype.reduceReverse=function(t,e){var l,i=this.tail;if(arguments.length>1)l=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,l=this.tail.value}for(var n=this.length-1;null!==i;n--)l=t(l,i.value,n),i=i.prev;return l},Yallist.prototype.toArray=function(){for(var t=new Array(this.length),e=0,l=this.head;null!==l;e++)t[e]=l.value,l=l.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,l=this.tail;null!==l;e++)t[e]=l.value,l=l.prev;return t},Yallist.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;null!==n&&i<t;i++)n=n.next;for(;null!==n&&i<e;i++,n=n.next)l.push(n.value);return l},Yallist.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;null!==n&&i>e;i--)n=n.prev;for(;null!==n&&i>t;i--,n=n.prev)l.push(n.value);return l},Yallist.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var l=0,i=this.head;null!==i&&l<t;l++)i=i.next;var n=[];for(l=0;i&&l<e;l++)n.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(l=2;l<arguments.length;l++)i=insert(this,i,arguments[l]);return n},Yallist.prototype.reverse=function(){for(var t=this.head,e=this.tail,l=t;null!==l;l=l.prev){var i=l.prev;l.prev=l.next,l.next=i}return this.head=e,this.tail=t,this};try{require("./iterator.js")(Yallist)}catch(t){}

},{"./iterator.js":47}],49:[function(require,module,exports){
const generalVerificationReport=require("./constructors/GeneralVerificationReport"),ErrorEntry=require("./constructors/ErrorEntry"),VUT=require("./VerificationUtilities"),jsonld=require("jsonld"),sdoURI="http://schema.org/";let sdoAdapterGenVer;async function initSdoAdapter(){sdoAdapterGenVer=new SDOAdapter;const e=await sdoAdapterGenVer.constructSDOVocabularyURL("latest");await sdoAdapterGenVer.addVocabularies([e])}async function isAnnotationValid(e){let r,t=[];try{let n=lexicalCheckJSON(e,t);if(!1===n.outcome)return createGeneralVerificationReport("Invalid","There was a lexical problem with the annotation.",t);if(!checkContext(r=n.annotation,t))return createGeneralVerificationReport("Invalid","There was a problem with the @context of the annotation.",t);recursive_checkAnomalies(r,t),semanticCheckJSONLD(r=await preProcessAnnotation(r),t),t=recursive_sdo_isAnnotationValid(r,t,"$");let o="Valid",a="The annotation is a valid Schema.org annotation.";if(t.length>0){o="ValidWithWarnings",a="The annotation is valid, but with warnings.";for(let e of t)if("Error"===e.severity||"Critical"===e.severity){o="Invalid",a="The annotation is invalid.";break}}return createGeneralVerificationReport(o,a,t)}catch(e){return console.log(e),"jsonld.InvalidUrl"===e.name?t.push(createError_999(e.details.code+": "+e.details.url+" - "+e.message)):t.push(createError_999("There was an error during the verification process, make sure the sent annotation has a valid serialization.")),createGeneralVerificationReport("Invalid","There was an execution error during the verification process, make sure the sent annotation has a valid serialization.",t)}}function lexicalCheckJSON(e,r){let t={outcome:!0};try{VUT.isString(e)?t.annotation=JSON.parse(e):t.annotation=JSON.parse(JSON.stringify(e))}catch(e){return r.push(createError_101()),t.outcome=!1,t}return!t.annotation||VUT.isObject(t.annotation)&&0===Object.keys(t.annotation).length||Array.isArray(t.annotation)&&0===t.annotation.length?(r.push(createError_102()),t.outcome=!1):VUT.isObject(t.annotation)||(r.push(createError_103()),t.outcome=!1),t}function checkContext(e,r){if(void 0===e["@context"])return r.push(createError_201()),!1;if(VUT.isString(e["@context"]))checkAllowedSDOContextURI(e["@context"])?checkRecommendedSDOContextURI(e["@context"])||r.push(createError_300_context()):r.push(createError_301());else if(VUT.isObject(e["@context"])){let t=!1,n=!1;e["@context"]["@vocab"]&&(VUT.isString(e["@context"]["@vocab"])?checkAllowedSDOContextURI(e["@context"]["@vocab"])?checkRecommendedSDOContextURI(e["@context"]["@vocab"])?t=!0:(r.push(createError_300_context()),n=!0):(r.push(createError_301()),n=!0):(n=!0,r.push(createError_202("The '@context' of the annotation has a '@vocab' value that is not a String. This value should be a string referencing the schema.org vocabulary."))));let o=Object.keys(e["@context"]);for(let a=0;a<o.length;a++)"@vocab"!==o[a]&&(VUT.isString(e["@context"][o[a]])?checkRecommendedSDOContextURI(e["@context"][o[a]])?t=!0:checkAllowedSDOContextURI(e["@context"][o[a]])&&(r.push(createError_300_context()),n=!0,t=!0):(n=!0,r.push(createError_202("The '@context' of the annotation has an invalid format."))));n||t||r.push(createError_301())}else r.push(createError_202("The '@context' of the annotation has a value that is not a String or an Object."));return!0}function recursive_checkAnomalies(e,r){for(let t of Object.keys(e))if(void 0===e[t])r.push(createError_104());else if(null===e[t])"@type"===t?r.push(createError_206(!0)):r.push(createError_206(!1));else if(VUT.isObject(e[t]))recursive_checkAnomalies(e[t],r);else if(Array.isArray(e[t]))for(let n of Object.keys(e[t]))void 0===e[t][n]?r.push(createError_104()):null===e[t][n]?"@type"===t?r.push(createError_206(!0)):r.push(createError_206(!1)):VUT.isObject(e[t][n])?recursive_checkAnomalies(e[t][n],r):Array.isArray(e[t][n])&&r.push(createError_205())}async function preProcessAnnotation(e){let r={schema:sdoURI};return e=recursive_contextReplacement(e,r),e=await jsonld.compact(e,r)}function recursive_contextReplacement(e,r){if(VUT.isObject(e["@context"])){let t=Object.keys(e["@context"]);for(let n=0;n<t.length;n++)checkAllowedSDOContextURI(e["@context"][t[n]])||"schema"===t[n]||r[t[n]]?e["@context"][t[n]]=sdoURI:r[t[n]]=e["@context"][t[n]]}else VUT.isString(e["@context"])&&(e["@context"]={"@vocab":sdoURI});let t=Object.keys(e);for(let n=0;n<t.length;n++)if(!t[n].startsWith("@"))if(Array.isArray(e[t[n]]))for(let o=0;o<e[t[n]].length;o++)e[t[n]][o]=recursive_contextReplacement(e[t[n]][o],r);else VUT.isObject(e[t[n]])&&(e[t[n]]=recursive_contextReplacement(e[t[n]],r));return e}function semanticCheckJSONLD(e,r){void 0!==e["@graph"]?recursive_semantic_isAnnotationValid(e["@graph"][0],r,"$"):recursive_semantic_isAnnotationValid(e,r,"$")}function recursive_semantic_isAnnotationValid(e,r,t){if(void 0===e["@type"])"$"===t&&r.push(createError_203("The annotation has no @type.",t));else if(!1===VUT.isString(e["@type"]))if(Array.isArray(e["@type"])){for(let n=0;n<e["@type"].length;n++)if(!1===VUT.isString(e["@type"][n])){r.push(createError_204(t+".@type/"+n));break}}else r.push(createError_204(t+".@type/0"));let n=Object.keys(e);for(let o=0;o<n.length;o++)if(Array.isArray(e[n[o]]))for(let a=0;a<e[n[o]].length;a++)VUT.isObject(e[n[o]][a])&&recursive_semantic_isAnnotationValid(e[n[o]][a],r,t+"."+n[o]+"/"+a);else VUT.isObject(e[n[o]])&&recursive_semantic_isAnnotationValid(e[n[o]],r,t+"."+n[o]+"/0")}function recursive_sdo_isAnnotationValid(e,r,t){let n=Object.keys(e),o=!1;for(let a of n)if("@type"===a)annotationTypeCheck(e,r,t);else if("@id"===a)o=!0;else if("@reverse"===a)o=!0,annotationReverseHandling(e,r,t);else if("@"!==a.substring(0,1))if(o=!0,checkIfValueIsValidSDOProperty(a)?(annotationDomainCheck(e["@type"],a,r,t),annotationRangeCheck(e,a,r,t)):annotationPropertyCheck(e,a,r,t),Array.isArray(e[a]))for(let n=0;n<e[a].length;n++)VUT.isObject(e[a][n])&&r.push.apply(r,recursive_sdo_isAnnotationValid(e[a][n],[],t+"."+a+"/"+n));else VUT.isObject(e[a])&&r.push.apply(r,recursive_sdo_isAnnotationValid(e[a],[],t+"."+a+"/0"));return o||r.push(createError_309(t)),r}function annotationTypeCheck(e,r,t){let n="@type",o=[];Array.isArray(e[n])?o=e[n]:o.push(e[n]);for(let e=0;e<o.length;e++)if(!1===checkIfValueIsValidSDOClass(o[e]))if(!0===checkIfSDOClassHasBlankSpaces(o[e]))r.push(createError_302("Non-conform @type (blank space)","The annotation has a @type entry with at least 1 blank space ('"+VUT.prettyPrintURIMTEs(o[e])+"') that is not conform to schema.org.",t+"."+n+"/"+e,o[e]));else{let a=checkIfSDOClassHasBadCase(o[e]);if(!1!==a)r.push(createError_302("Non-conform @type (uppercase/lowercase)","The annotation has a @type entry with an uppercase/lowercase error ('"+VUT.prettyPrintURIMTEs(o[e])+"' that should be '"+VUT.prettyPrintURIMTEs(a)+"').",t+"."+n+"/"+e,o[e]));else{let a=checkIfValueIsWrongSpelledSDOClass(o[e]);!1===a?r.push(createError_302("Non-conform @type","The annotation has a @type entry ('"+VUT.prettyPrintURIMTEs(o[e])+"') that is not conform to schema.org.",t+"."+n+"/"+e,o[e])):r.push(createError_302("Non-conform @type (misspell)","The annotation has a wrong spelled @type entry ('"+VUT.prettyPrintURIMTEs(o[e])+"', could be one of the following: '"+a+"') that is not conform to schema.org.",t+"."+n+"/"+e,o[e]))}}}function annotationReverseHandling(e,r,t){if(Array.isArray(e["@reverse"]))for(let n=0;n<e["@reverse"].length;n++)VUT.isObject(e["@reverse"][n])&&r.push.apply(r,recursive_sdo_isAnnotationValid(e["@reverse"][n],[],t+".@reverse/"+n));else VUT.isObject(e["@reverse"])&&r.push.apply(r,recursive_sdo_isAnnotationValid(e["@reverse"],[],t+".@reverse/0"))}function annotationPropertyCheck(e,r,t,n){let o=r;if(checkIfValueIsActionSDOProperty(o))VUT.isString(e[o])||t.push(createError_304("The annotation has an action property ('"+VUT.prettyPrintURIMTEs(o)+"') with a value that is not a string.",n+"."+o));else if(checkIfSDOPropertyHasBlankSpaces(o))t.push(createError_303("Non-conform property (blank space)","The annotation has a property entry with at least 1 blank space ('"+VUT.prettyPrintURIMTEs(o)+"') that is not conform to schema.org.",n,o));else{let e=checkIfSDOPropertyHasBadCase(o);if(!1!==e)t.push(createError_303("Non-conform property (uppercase/lowercase)","The annotation has a property entry with an uppercase/lowercase error ('"+VUT.prettyPrintURIMTEs(o)+"' that should be '"+e+"').",n,o));else{let e=checkIfValueIsWrongSpelledSDOProperty(o);!1===e?t.push(createError_303("Non-conform property","The annotation has a property entry ('"+VUT.prettyPrintURIMTEs(o)+"') that is not conform to schema.org.",n,o)):t.push(createError_303("Non-conform property (misspell)","The annotation has a wrong spelled property entry ('"+VUT.prettyPrintURIMTEs(o)+"' that could be one of the following: '"+e+"').",n,o))}}}function annotationDomainCheck(e,r,t,n){if(void 0!==e){let o=!1,a=[];Array.isArray(e)?a=e:a.push(e);let i=!0;for(let e of a)if(!checkIfValueIsValidSDOClass(e)){i=!1;break}if(i){for(let e=0;e<a.length;e++)try{if(sdoAdapterGenVer.getClass(a[e]).getProperties(!0).includes(r)){o=!0;break}}catch(e){}o||t.push(createError_305("The annotation has an entity ('"+VUT.prettyPrintURIMTEs(e)+"') with a property that it is not allowed to use ('"+VUT.prettyPrintURIMTEs(r)+"') based on the schema.org vocabulary.",n,r))}}}function annotationRangeCheck(e,r,t,n){let o=r,a=sdoAdapterGenVer.getProperty(o).getRanges(!1),i=[];Array.isArray(e[o])?i=e[o]:i.push(e[o]);for(let e=0;e<i.length;e++){let r,s=!1;switch(typeof i[e]){case"number":(a.includes("schema:Number")||a.includes("schema:Integer")||a.includes("schema:Float")||a.includes("schema:Thing"))&&(s=!0);break;case"boolean":(a.includes("schema:Boolean")||a.includes("schema:Thing"))&&(s=!0);break;case"string":if((r=(r=i[e].replace(/^[\s\t\n\r]*/,"")).replace(/[\s\t\n\r]*$/,""))!==i[e]&&""!==i[e].replace(/ /g,"")&&t.push(new ErrorEntry("AnnotationError","Warning",300,"Trailing spaces","The annotation has a property ('"+VUT.prettyPrintURIMTEs(o)+"') with a value that has trailing spaces. If those spaces do not exist on purpose, they should be deleted.",null,n+"."+o+"/"+e,i[e])),(a.includes("schema:Text")||a.includes("schema:Thing"))&&(s=!0),!s&&a.includes("schema:Number")||a.includes("schema:Float")){let e=Number(r);VUT.isNumber(e)&&(s=!0)}if(!s&&a.includes("schema:Integer")){let e=Number(r);Number.isInteger(e)&&(s=!0)}if(!s&&a.includes("schema:Boolean")&&("true"!==r&&"false"!==r||(s=!0)),!s&&a.includes("schema:URL")){VUT.isUrl(r)&&(s=!0)}if(!s&&a.includes("schema:Time")){!1!==VUT.genTimeObj(r)&&(s=!0)}if(!s&&a.includes("schema:DateTime")){!1!==VUT.genDateTimeObj(r)&&(s=!0)}if(!s&&a.includes("schema:Date")){!1!==VUT.genDateObj(r)&&(s=!0)}if(!s)for(let e=0;e<a.length;e++)sdoAdapterGenVer.getListOfEnumerations().includes(VUT.reversePrettyPrintURI(a[e]))&&(s=!0);break;case"object":if(void 0!==i[e]["@type"])!0===rec_checkIfTypeIsInRangeOfProperty(i[e]["@type"],a)?s=!0:(s=!0,t.push(new ErrorEntry("AnnotationError","Error",306,"Non-conform range","The annotation has a property ('"+VUT.prettyPrintURIMTEs(o)+"') with a value type ('"+VUT.prettyPrintURIMTEs(i[e]["@type"])+"') that is not conform to schema.org.",null,n+"."+o+"/"+e,typePrinter(i[e]["@type"]))));else if(void 0===i[e]["@type"]&&void 0!==i[e]["@id"]){s=!0;let r=null;Array.isArray(i[e]["@id"])||VUT.isObject(i[e]["@id"])||(r=i[e]["@id"]),t.push(new ErrorEntry("AnnotationError","Warning",300,"Unknown range","The annotation has a property ('"+VUT.prettyPrintURIMTEs(o)+"') with a referenced value (@id is used) for which the range type is unknown. The conformance of the range can not be verified.",null,n+"."+o+"/"+e,r))}else void 0===i[e]["@type"]&&void 0===i[e]["@id"]&&(s=!0,t.push(createError_203("The annotation has an entity with no @type.",n+"."+o+"/"+e)))}"string"==typeof i[e]&&!1===s&&sdoAdapterGenVer.getProperty(o).getRanges(!1,{termType:["Class","Enumeration"]}).length>0?t.push(new ErrorEntry("AnnotationError","Warning",307,"Non-conform range (string)","The annotation has a property ('"+VUT.prettyPrintURIMTEs(o)+"') with a string as value, although a string is not explicitly allowed as range for this property according to the schema.org vocabulary.",null,n+"."+o+"/"+e,i[e])):!1===s&&t.push(new ErrorEntry("AnnotationError","Error",306,"Non-conform range","The annotation has a property ('"+VUT.prettyPrintURIMTEs(o)+"') with a value type that is not conform to schema.org.",null,n+"."+o+"/"+e,i[e])),"string"==typeof i[e]&&""===i[e].replace(/ /g,"")&&t.push(new ErrorEntry("JsonLdError","Warning",207,"Empty string","The annotation has a property ('"+VUT.prettyPrintURIMTEs(o)+"') with an empty string as value.",null,n+"."+o+"/"+e,i[e]))}}function typePrinter(e){let r="";if(Array.isArray(e))for(let t=0;t<e.length;t++)r+=e[t],t!==e.length-1&&(r+=" + ");else r=e;return r}function rec_checkIfTypeIsInRangeOfProperty(e,r){if(Array.isArray(r))for(let t=0;t<r.length;t++){let n=[];!0===Array.isArray(e)?n=e:n.push(e);for(let e=0;e<n.length;e++)if(n[e]===r[t])return!0;try{if(!0===rec_checkIfTypeIsInRangeOfProperty(e,sdoAdapterGenVer.getClass(r[t]).getSubClasses(!0)))return!0}catch(e){}}return!1}function checkIfValueIsValidSDOClass(e){return sdoAdapterGenVer.getListOfClasses().includes(e)||sdoAdapterGenVer.getListOfEnumerations().includes(e)}function checkIfSDOClassHasBlankSpaces(e){return e=e.replace(/ /g,""),sdoAdapterGenVer.getListOfClasses().includes(e)||sdoAdapterGenVer.getListOfEnumerations().includes(e)}function checkIfSDOClassHasBadCase(e){e=e.toLowerCase();for(let r=0;r<sdoAdapterGenVer.getListOfClasses().length;r++)if(e===sdoAdapterGenVer.getListOfClasses()[r].toLowerCase())return VUT.prettyPrintURI(sdoAdapterGenVer.getListOfClasses()[r]);for(let r=0;r<sdoAdapterGenVer.getListOfEnumerations().length;r++)if(e===sdoAdapterGenVer.getListOfEnumerations()[r].toLowerCase())return VUT.prettyPrintURI(sdoAdapterGenVer.getListOfEnumerations()[r]);return!1}function checkIfValueIsWrongSpelledSDOClass(e){let r=[];for(let t=0;t<sdoAdapterGenVer.getListOfClasses().length;t++)VUT.levDist(e,sdoAdapterGenVer.getListOfClasses()[t])<3&&r.push(VUT.prettyPrintURI(sdoAdapterGenVer.getListOfClasses()[t]));for(let t=0;t<sdoAdapterGenVer.getListOfEnumerations().length;t++)VUT.levDist(e,sdoAdapterGenVer.getListOfEnumerations()[t])<3&&r.push(VUT.prettyPrintURI(sdoAdapterGenVer.getListOfEnumerations()[t]));if(0===r.length)return!1;{let e="";for(let t=0;t<r.length;t++)e=t+1===r.length?e.concat(r[t]):e.concat(r[t]+", ");return e}}function checkIfValueIsValidSDOProperty(e){return sdoAdapterGenVer.getListOfProperties().includes(e)}function checkIfSDOPropertyHasBlankSpaces(e){return e=e.replace(/ /g,""),sdoAdapterGenVer.getListOfProperties().includes(e)}function checkIfSDOPropertyHasBadCase(e){e=e.toLowerCase();for(let r=0;r<sdoAdapterGenVer.getListOfProperties().length;r++)if(e===sdoAdapterGenVer.getListOfProperties()[r].toLowerCase())return VUT.prettyPrintURI(sdoAdapterGenVer.getListOfProperties()[r]);return!1}function checkIfValueIsWrongSpelledSDOProperty(e){let r=[];for(let t=0;t<sdoAdapterGenVer.getListOfProperties().length;t++)VUT.levDist(e,sdoAdapterGenVer.getListOfProperties()[t])<3&&r.push(VUT.prettyPrintURI(sdoAdapterGenVer.getListOfProperties()[t]));if(0===r.length)return!1;{let e="";for(let t=0;t<r.length;t++)e=t+1===r.length?e.concat(r[t]):e.concat(r[t]+", ");return e}}function checkIfValueIsActionSDOProperty(e){return!(!e.endsWith("-input")||!sdoAdapterGenVer.getListOfProperties().includes(e.substring(0,e.length-"-input".length)))||!(!e.endsWith("-output")||!sdoAdapterGenVer.getListOfProperties().includes(e.substring(0,e.length-"-output".length)))}function checkRecommendedSDOContextURI(e){return/^https?:\/\/schema\.org\/?$/.test(e)}function checkAllowedSDOContextURI(e){return/^(https?:\/\/)?(www\.)?schema\.org\/?$/.test(e)}function createGeneralVerificationReport(e,r,t){return new generalVerificationReport(e,null,r,t)}function createError_101(){return new ErrorEntry("JsonError","Critical",101,"Invalid JSON","The input annotation can not be parsed to JSON.",null,null)}function createError_102(){return new ErrorEntry("JsonError","Critical",102,"Empty JSON","The input annotation is empty.",null,null)}function createError_103(){return new ErrorEntry("JsonError","Critical",103,"No JSON Object","The input annotation is not a JSON object, as required.",null,null)}function createError_104(){return new ErrorEntry("JsonError","Error",104,"Usage of undefined","The annotation contains an 'undefined' value, which is not conform to the JSON specification.",null,"$")}function createError_201(){return new ErrorEntry("JsonLdError","Critical",201,"No @Context","The annotation has no '@context' entry, as expected.",null,"$")}function createError_202(e){return new ErrorEntry("JsonLdError","Critical",202,"Bad @Context",e,null,"$")}function createError_203(e,r){return new ErrorEntry("JsonLdError","Error",203,"No @type",e,null,r)}function createError_204(e){return new ErrorEntry("JsonLdError","Error",204,"Bad @type","The annotation has an entity with an invalid @type entry.",null,e)}function createError_205(){return new ErrorEntry("JsonLdError","Error",205,"Double Nested Array","The annotation contains a double nested array, which is not conform to the JSON-LD specification.",null,"$")}function createError_206(e=!1){let r,t;return e?(r="Critical",t="The annotation contains a 'null' value as a @type, which causes errors during the JSON-LD processing."):(r="Warning",t="The annotation contains a 'null' value, which is allowed by the JSON-LD specification, but not recommended to use."),new ErrorEntry("JsonLdError",r,206,"Usage of null",t,null,"$")}function createError_300_context(){return new ErrorEntry("AnnotationError","Warning",300,"Non-ideal @context","The '@context' of schema.org annotations should be 'https://schema.org/'.",null,"$")}function createError_301(){return new ErrorEntry("AnnotationError","Critical",301,"Non-conform @context","The '@context' of the annotation does not contain the schema.org vocabulary.",null,"$")}function createError_302(e,r,t,n=null){return new ErrorEntry("AnnotationError","Error",302,e,r,null,t,n)}function createError_303(e,r,t,n=null){return new ErrorEntry("AnnotationError","Error",303,e,r,null,t,n)}function createError_304(e,r,t=null){return new ErrorEntry("AnnotationError","Error",304,"Misused Action",e,null,r,t)}function createError_305(e,r,t=null){return new ErrorEntry("AnnotationError","Error",305,"Non-conform domain",e,null,r,t)}function createError_309(e){return new ErrorEntry("AnnotationError","Warning",309,"Empty entity","The annotation has an entity with no properties other than @type.",null,e)}function createError_999(e){return new ErrorEntry("ExecutionError","Critical",999,"Execution Error",e,null,"$")}initSdoAdapter(),module.exports={isAnnotationValid:isAnnotationValid};

},{"./VerificationUtilities":50,"./constructors/ErrorEntry":51,"./constructors/GeneralVerificationReport":52,"jsonld":20}],50:[function(require,module,exports){
const moment=require("moment");function isObject(t){return!Array.isArray(t)&&(null!=t&&"object"==typeof t)}function isString(t){return null!=t&&("string"==typeof t||t instanceof String)}function isNumber(t){return null!=t&&!Number.isNaN(t)&&"number"==typeof t}function isBoolean(t){return null!=t&&"boolean"==typeof t}function isUndefined(t){return void 0===t}function isNull(t){return null===t}function levDist(t,e){let r=[],n=t.length,i=e.length;if(0===n)return i;if(0===i)return n;for(let t=n;t>=0;t--)r[t]=[];for(let t=n;t>=0;t--)r[t][0]=t;for(let t=i;t>=0;t--)r[0][t]=t;for(let s=1;s<=n;s++){let o=t.charAt(s-1);for(let l=1;l<=i;l++){if(s===l&&r[s][l]>4)return n;let i=e.charAt(l-1),a=o===i?0:1,h=r[s-1][l]+1,Y=r[s][l-1]+1,u=r[s-1][l-1]+a;Y<h&&(h=Y),u<h&&(h=u),r[s][l]=h,s>1&&l>1&&o===e.charAt(l-2)&&t.charAt(s-2)===i&&(r[s][l]=Math.min(r[s][l],r[s-2][l-2]+a))}}return r[n][i]}function mergeArrays(t,e){for(let r=0;r<e.length;r++)t.push(e[r]);return t}function isUrl(t){"www."===t.substring(0,4)&&(t="http://".concat(t));let e=new RegExp(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i),r=t.match(e);return null!=r&&(1===r.length&&r[0].length===t.length)}function resolvePath_graphDS(t,e){let r=!0,n={};try{do{let i=e.split("/");if(e.startsWith("$"))n=t[Object.keys(t)[0]],e=e.substring(1);else if(e.startsWith(".")){let r=i[0].split(".");n=resolvePathDS_graphProperty(t,n,r[1]),e=e.substring(r[1].length+1)}else e.startsWith("/")?(n=resolvePathDS_graphRange(t,n,i[1].split(".")[0]),e=e.substring(i[1].split(".")[0].length+1)):r=!1}while(r);return n}catch(t){return console.log(t),console.log("dsPath: "+e),null}}function resolvePathDS_graphProperty(t,e,r){let n;if(void 0!==e["sh:targetClass"])n=e["sh:property"];else{if(!e["sh:node"]||!t[e["sh:node"]]["sh:property"])throw new Error("Path is invalid for the given Domain Specification.");n=t[e["sh:node"]]["sh:property"]}for(let e=0;e<n.length;e++)if(t[n[e]]&&t[n[e]]["sh:path"]===r)return t[n[e]];throw new Error("Path is invalid for the given Domain Specification.")}function resolvePathDS_graphRange(t,e,r){if(r.split("_").length>1){let t=r.split("_");r=[];for(let e=0;e<t.length;e++)r.push(t[e])}let n=e["sh:or"];for(let e=0;e<n.length;e++){if(isString(r)&&t[n[e]]&&t[n[e]]["sh:datatype"]===r)return t[n[e]];if(void 0!==t[n[e]]["sh:class"]&&checkIfTypesMatch(t[n[e]]["sh:class"],r))return t[n[e]]}throw new Error("Path is invalid for the given Domain Specification.")}function resolvePath_graphAnnotation(t,e,r){let n=!0,i={};try{do{let s=e.split("/");if(e.startsWith("$"))i=t[r],e=e.substring(1);else if(e.startsWith(".")){let t=s[0].split(".");i=resolvePathAnnotation_graphProperty(i,t[1]),e=e.substring(t[1].length+1)}else e.startsWith("/")?(i=resolvePathAnnotation_graphRange(t,i,s[1].split(".")[0]),e=e.substring(s[1].split(".")[0].length+1)):n=!1}while(n);return i}catch(t){return console.log(t),console.log("annotationPath: "+e),null}}function resolvePathAnnotation_graphProperty(t,e){if(void 0!==t[e])return t[e];throw new Error("Path is invalid for the given Annotation.")}function resolvePathAnnotation_graphRange(t,e,r){if(0!==(r=Number(r))&&(!Array.isArray(e)||e.length<r+1))throw new Error("Path is invalid for the given Annotation.");let n;return isObject(n=Array.isArray(e)?e[r]:e)?t[n["@id"]]:n}function getDepthDS(t){return t.split("/").length-1}function checkIfTypesMatch(t,e){if(Array.isArray(t)){if(Array.isArray(e)){for(let r=0;r<t.length;r++)if(-1===e.indexOf(t[r]))return!1;for(let r=0;r<e.length;r++)if(-1===t.indexOf(e[r]))return!1;return!0}return 1===t.length&&t[0]===e}return Array.isArray(e)?1===e.length&&e[0]===t:t===e}function stringifyTypeForPath(t){let e="";for(let r=0;r<t.length;r++)e=e.concat(t[r]),r+1!==t.length&&(e=e.concat("_"));return e}function prettyPrintURIMTEs(t){let e="";if(Array.isArray(t)){for(let r of t)e+=prettyPrintURI(r)+",";e=e.substring(0,e.length-1)}else e=prettyPrintURI(t);return e}function prettyPrintURI(t){return isString(t)?t.startsWith("schema:")?t.substring("schema:".length):t:(console.log("URI THAT IS NOT STRING!"),console.log(t),t)}function reversePrettyPrintURI(t){return-1===t.indexOf(":")?"schema:"+t:t}function genTimeObj(t){let e=["HH:mm:ss.SSSZ","HH:mm:ss.SSS","HH:mm:ssZ","HH:mm:ss","HH:mmZ","HH:mm"];for(let r=0;r<e.length;r++){let n=moment(t,e[r],!0);if(n.isValid())return n}return!1}function genDateTimeObj(t){let e=["YYYY-MM-DDTHH:mm:ss.SZ","YYYY-MM-DDTHH:mm:ssZ","YYYY-MM-DDTHH:mm:ss","YYYY-MM-DDTHH:mm:ss.S","YYYY-MM-DDTHH:mmZ","YYYY-MM-DDTHH:mm"];e.push("-YYYY-MM-DDTHH:mm:ss.SZ","-YYYY-MM-DDTHH:mm:ssZ","-YYYY-MM-DDTHH:mm:ss","-YYYY-MM-DDTHH:mm:ss.S","-YYYY-MM-DDTHH:mmZ","-YYYY-MM-DDTHH:mm");for(let r=0;r<e.length;r++){let n=moment(t,e[r],!0);if(n.isValid())return n}return!1}function genDateObj(t){let e=[];e.push("YYYY-MM-DD","YYYYMMDD"),e.push("YYYY-MM","YYYY","YY"),e.push("YYYYYY-MM-DD","YYYYYYMMDD"),e.push("YYYYYY-MM","YYYYYY"),e.push("YYYY-DDDD","YYYYDDDD"),e.push("YYYYYY-DDDD","YYYYYYDDDD"),e.push(moment.HTML5_FMT.WEEK);let r=moment(t,e,!0);return!!r.isValid()&&r}module.exports={isObject:isObject,isString:isString,isNumber:isNumber,isBoolean:isBoolean,isUndefined:isUndefined,isNull:isNull,levDist:levDist,mergeArrays:mergeArrays,isUrl:isUrl,resolvePath_graphDS:resolvePath_graphDS,resolvePath_graphAnnotation:resolvePath_graphAnnotation,getDepthDS:getDepthDS,stringifyTypeForPath:stringifyTypeForPath,prettyPrintURI:prettyPrintURI,prettyPrintURIMTEs:prettyPrintURIMTEs,reversePrettyPrintURI:reversePrettyPrintURI,genTimeObj:genTimeObj,genDateTimeObj:genDateTimeObj,genDateObj:genDateObj};

},{"moment":27}],51:[function(require,module,exports){
class ErrorEntry{constructor(t,r,s,i,n,l,o,e){this["@type"]=t,this.severity=r,this.errorCode=s,null!==i&&(this.name=i),null!==n&&(this.description=n),null!==l&&(this.dsPath=l),null!==o&&(this.annotationPath=o),e&&(this.value=e)}}module.exports=ErrorEntry;

},{}],52:[function(require,module,exports){
class GeneralVerificationReport{constructor(e,i,r,t){this.verificationResult=e,null!==i&&(this.name=i),null!==r&&(this.description=r),this.errors=t}}module.exports=GeneralVerificationReport;

},{}]},{},[49])(49)
});
